var xs=Object.defineProperty;var mo=e=>{throw TypeError(e)};var bs=(e,t,n)=>t in e?xs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var yo=(e,t,n)=>bs(e,typeof t!="symbol"?t+"":t,n),ci=(e,t,n)=>t.has(e)||mo("Cannot "+n);var vt=(e,t,n)=>(ci(e,t,"read from private field"),n?n.call(e):t.get(e)),tn=(e,t,n)=>t.has(e)?mo("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ui=(e,t,n,i)=>(ci(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),vo=(e,t,n)=>(ci(e,t,"access private method"),n);import{a as j,t as ze,n as Ye,c as _s,d as ft}from"../chunks/disclose-version.Gv39rB-h.js";import"../chunks/legacy.C8mmlGkh.js";import{j as wt,u as ks,Y as Es,p as ae,aO as Hn,aU as J,aV as Ue,c as Pe,r as Ee,t as be,a as le,T as d,al as X,J as A,aE as Z,a5 as ee,f as De,s as ge,n as Yi,aN as In,V as po,aT as rt,aQ as Ss}from"../chunks/runtime.QVh8-8dV.js";import{i as ce}from"../chunks/lifecycle.DbpNhD8o.js";import{p as h,b as Le,c as V,l as Ie,d as an,s as Vt,e as Cs}from"../chunks/props.-EZ33SAS.js";import{g as F,w as $,r as ct,d as Yt}from"../chunks/index.B5-8jDeY.js";import{s as Jt}from"../chunks/render.CGILuW-D.js";import{c as Q,s as et,e as kt,b as Li,f as Ms,r as Ps,a as zs}from"../chunks/attributes.DblhVvAH.js";import{g as ke}from"../chunks/events.DJ2rhY5v.js";import{s as ir,t as Ae,a as Dt}from"../chunks/class.C2IlbBZd.js";import{i as Xe}from"../chunks/if.BZTmHWO_.js";import{a as Qe}from"../chunks/actions.Dskin971.js";import{b as Bi}from"../chunks/this.D5yiMbYs.js";import{o as Un,c as Jn,a as or}from"../chunks/index-client.BRu-p0hC.js";import{e as Qn}from"../chunks/each.OyTsW8_o.js";import{c as rr}from"../chunks/svelte-component.CV2HG0yE.js";function Ke(e,t,n,i){var o=e.__styles??(e.__styles={});o[t]!==n&&(o[t]=n,n==null?e.style.removeProperty(t):e.style.setProperty(t,n,""))}var St,Ft,mn,qn,sr;const Gn=class Gn{constructor(t){tn(this,qn);tn(this,St,new WeakMap);tn(this,Ft);tn(this,mn);ui(this,mn,t)}observe(t,n){var i=vt(this,St).get(t)||new Set;return i.add(n),vt(this,St).set(t,i),vo(this,qn,sr).call(this).observe(t,vt(this,mn)),()=>{var o=vt(this,St).get(t);o.delete(n),o.size===0&&(vt(this,St).delete(t),vt(this,Ft).unobserve(t))}}};St=new WeakMap,Ft=new WeakMap,mn=new WeakMap,qn=new WeakSet,sr=function(){return vt(this,Ft)??ui(this,Ft,new ResizeObserver(t=>{for(var n of t){Gn.entries.set(n.target,n);for(var i of vt(this,St).get(n.target)||[])i(n)}}))},yo(Gn,"entries",new WeakMap);let ki=Gn;var Ns=new ki({box:"border-box"});function wo(e,t,n){var i=Ns.observe(e,()=>n(e[t]));wt(()=>(ks(()=>n(e[t])),i))}function fe(e,t){var a;var n=(a=e.$$events)==null?void 0:a[t.type],i=Es(n)?n.slice():n==null?[]:[n];for(var o of i)o.call(this,t)}function je(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=je(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Ts={value:()=>{}};function jn(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Nn(n)}function Nn(e){this._=e}function As(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Nn.prototype=jn.prototype={constructor:Nn,on:function(e,t){var n=this._,i=As(e+"",n),o,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((o=(e=i[a]).type)&&(o=Os(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(o=(e=i[a]).type)n[o]=xo(n[o],e.name,t);else if(t==null)for(o in n)n[o]=xo(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Nn(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,a;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,o=a.length;i<o;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,a=i.length;o<a;++o)i[o].value.apply(t,n)}};function Os(e,t){for(var n=0,i=e.length,o;n<i;++n)if((o=e[n]).name===t)return o.value}function xo(e,t,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=Ts,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ei="http://www.w3.org/1999/xhtml";const bo={svg:"http://www.w3.org/2000/svg",xhtml:Ei,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $n(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),bo.hasOwnProperty(t)?{space:bo[t],local:e}:e}function Hs(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ei&&t.documentElement.namespaceURI===Ei?t.createElement(e):t.createElementNS(n,e)}}function Is(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ar(e){var t=$n(e);return(t.local?Is:Hs)(t)}function Ds(){}function Wi(e){return e==null?Ds:function(){return this.querySelector(e)}}function Rs(e){typeof e!="function"&&(e=Wi(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var a=t[o],s=a.length,r=i[o]=new Array(s),l,u,c=0;c<s;++c)(l=a[c])&&(u=e.call(l,l.__data__,c,a))&&("__data__"in l&&(u.__data__=l.__data__),r[c]=u);return new nt(i,this._parents)}function Vs(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Xs(){return[]}function lr(e){return e==null?Xs:function(){return this.querySelectorAll(e)}}function Ys(e){return function(){return Vs(e.apply(this,arguments))}}function Ls(e){typeof e=="function"?e=Ys(e):e=lr(e);for(var t=this._groups,n=t.length,i=[],o=[],a=0;a<n;++a)for(var s=t[a],r=s.length,l,u=0;u<r;++u)(l=s[u])&&(i.push(e.call(l,l.__data__,u,s)),o.push(l));return new nt(i,o)}function cr(e){return function(){return this.matches(e)}}function ur(e){return function(t){return t.matches(e)}}var Bs=Array.prototype.find;function Ws(e){return function(){return Bs.call(this.children,e)}}function Ks(){return this.firstElementChild}function Fs(e){return this.select(e==null?Ks:Ws(typeof e=="function"?e:ur(e)))}var Zs=Array.prototype.filter;function qs(){return Array.from(this.children)}function Gs(e){return function(){return Zs.call(this.children,e)}}function Us(e){return this.selectAll(e==null?qs:Gs(typeof e=="function"?e:ur(e)))}function Js(e){typeof e!="function"&&(e=cr(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var a=t[o],s=a.length,r=i[o]=[],l,u=0;u<s;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&r.push(l);return new nt(i,this._parents)}function dr(e){return new Array(e.length)}function Qs(){return new nt(this._enter||this._groups.map(dr),this._parents)}function Dn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Dn.prototype={constructor:Dn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function js(e){return function(){return e}}function $s(e,t,n,i,o,a){for(var s=0,r,l=t.length,u=a.length;s<u;++s)(r=t[s])?(r.__data__=a[s],i[s]=r):n[s]=new Dn(e,a[s]);for(;s<l;++s)(r=t[s])&&(o[s]=r)}function ea(e,t,n,i,o,a,s){var r,l,u=new Map,c=t.length,g=a.length,f=new Array(c),m;for(r=0;r<c;++r)(l=t[r])&&(f[r]=m=s.call(l,l.__data__,r,t)+"",u.has(m)?o[r]=l:u.set(m,l));for(r=0;r<g;++r)m=s.call(e,a[r],r,a)+"",(l=u.get(m))?(i[r]=l,l.__data__=a[r],u.delete(m)):n[r]=new Dn(e,a[r]);for(r=0;r<c;++r)(l=t[r])&&u.get(f[r])===l&&(o[r]=l)}function ta(e){return e.__data__}function na(e,t){if(!arguments.length)return Array.from(this,ta);var n=t?ea:$s,i=this._parents,o=this._groups;typeof e!="function"&&(e=js(e));for(var a=o.length,s=new Array(a),r=new Array(a),l=new Array(a),u=0;u<a;++u){var c=i[u],g=o[u],f=g.length,m=ia(e.call(c,c&&c.__data__,u,i)),b=m.length,k=r[u]=new Array(b),S=s[u]=new Array(b),E=l[u]=new Array(f);n(c,g,k,S,E,m,t);for(var p=0,w=0,x,P;p<b;++p)if(x=k[p]){for(p>=w&&(w=p+1);!(P=S[w])&&++w<b;);x._next=P||null}}return s=new nt(s,i),s._enter=r,s._exit=l,s}function ia(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function oa(){return new nt(this._exit||this._groups.map(dr),this._parents)}function ra(e,t,n){var i=this.enter(),o=this,a=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),i&&o?i.merge(o).order():o}function sa(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,o=n.length,a=i.length,s=Math.min(o,a),r=new Array(o),l=0;l<s;++l)for(var u=n[l],c=i[l],g=u.length,f=r[l]=new Array(g),m,b=0;b<g;++b)(m=u[b]||c[b])&&(f[b]=m);for(;l<o;++l)r[l]=n[l];return new nt(r,this._parents)}function aa(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],o=i.length-1,a=i[o],s;--o>=0;)(s=i[o])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function la(e){e||(e=ca);function t(g,f){return g&&f?e(g.__data__,f.__data__):!g-!f}for(var n=this._groups,i=n.length,o=new Array(i),a=0;a<i;++a){for(var s=n[a],r=s.length,l=o[a]=new Array(r),u,c=0;c<r;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new nt(o,this._parents).order()}function ca(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ua(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function da(){return Array.from(this)}function fa(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,a=i.length;o<a;++o){var s=i[o];if(s)return s}return null}function ha(){let e=0;for(const t of this)++e;return e}function ga(){return!this.node()}function ma(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var o=t[n],a=0,s=o.length,r;a<s;++a)(r=o[a])&&e.call(r,r.__data__,a,o);return this}function ya(e){return function(){this.removeAttribute(e)}}function va(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pa(e,t){return function(){this.setAttribute(e,t)}}function wa(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function xa(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ba(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function _a(e,t){var n=$n(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?va:ya:typeof t=="function"?n.local?ba:xa:n.local?wa:pa)(n,t))}function fr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ka(e){return function(){this.style.removeProperty(e)}}function Ea(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Sa(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Ca(e,t,n){return arguments.length>1?this.each((t==null?ka:typeof t=="function"?Sa:Ea)(e,t,n??"")):Zt(this.node(),e)}function Zt(e,t){return e.style.getPropertyValue(t)||fr(e).getComputedStyle(e,null).getPropertyValue(t)}function Ma(e){return function(){delete this[e]}}function Pa(e,t){return function(){this[e]=t}}function za(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Na(e,t){return arguments.length>1?this.each((t==null?Ma:typeof t=="function"?za:Pa)(e,t)):this.node()[e]}function hr(e){return e.trim().split(/^|\s+/)}function Ki(e){return e.classList||new gr(e)}function gr(e){this._node=e,this._names=hr(e.getAttribute("class")||"")}gr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function mr(e,t){for(var n=Ki(e),i=-1,o=t.length;++i<o;)n.add(t[i])}function yr(e,t){for(var n=Ki(e),i=-1,o=t.length;++i<o;)n.remove(t[i])}function Ta(e){return function(){mr(this,e)}}function Aa(e){return function(){yr(this,e)}}function Oa(e,t){return function(){(t.apply(this,arguments)?mr:yr)(this,e)}}function Ha(e,t){var n=hr(e+"");if(arguments.length<2){for(var i=Ki(this.node()),o=-1,a=n.length;++o<a;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Oa:t?Ta:Aa)(n,t))}function Ia(){this.textContent=""}function Da(e){return function(){this.textContent=e}}function Ra(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Va(e){return arguments.length?this.each(e==null?Ia:(typeof e=="function"?Ra:Da)(e)):this.node().textContent}function Xa(){this.innerHTML=""}function Ya(e){return function(){this.innerHTML=e}}function La(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ba(e){return arguments.length?this.each(e==null?Xa:(typeof e=="function"?La:Ya)(e)):this.node().innerHTML}function Wa(){this.nextSibling&&this.parentNode.appendChild(this)}function Ka(){return this.each(Wa)}function Fa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Za(){return this.each(Fa)}function qa(e){var t=typeof e=="function"?e:ar(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ga(){return null}function Ua(e,t){var n=typeof e=="function"?e:ar(e),i=t==null?Ga:typeof t=="function"?t:Wi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Ja(){var e=this.parentNode;e&&e.removeChild(this)}function Qa(){return this.each(Ja)}function ja(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $a(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function el(e){return this.select(e?$a:ja)}function tl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function nl(e){return function(t){e.call(this,t,this.__data__)}}function il(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function ol(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++i]=a;++i?t.length=i:delete this.__on}}}function rl(e,t,n){return function(){var i=this.__on,o,a=nl(t);if(i){for(var s=0,r=i.length;s<r;++s)if((o=i[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(o):this.__on=[o]}}function sl(e,t,n){var i=il(e+""),o,a=i.length,s;if(arguments.length<2){var r=this.node().__on;if(r){for(var l=0,u=r.length,c;l<u;++l)for(o=0,c=r[l];o<a;++o)if((s=i[o]).type===c.type&&s.name===c.name)return c.value}return}for(r=t?rl:ol,o=0;o<a;++o)this.each(r(i[o],t,n));return this}function vr(e,t,n){var i=fr(e),o=i.CustomEvent;typeof o=="function"?o=new o(t,n):(o=i.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function al(e,t){return function(){return vr(this,e,t)}}function ll(e,t){return function(){return vr(this,e,t.apply(this,arguments))}}function cl(e,t){return this.each((typeof t=="function"?ll:al)(e,t))}function*ul(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,a=i.length,s;o<a;++o)(s=i[o])&&(yield s)}var pr=[null];function nt(e,t){this._groups=e,this._parents=t}function yn(){return new nt([[document.documentElement]],pr)}function dl(){return this}nt.prototype=yn.prototype={constructor:nt,select:Rs,selectAll:Ls,selectChild:Fs,selectChildren:Us,filter:Js,data:na,enter:Qs,exit:oa,join:ra,merge:sa,selection:dl,order:aa,sort:la,call:ua,nodes:da,node:fa,size:ha,empty:ga,each:ma,attr:_a,style:Ca,property:Na,classed:Ha,text:Va,html:Ba,raise:Ka,lower:Za,append:qa,insert:Ua,remove:Qa,clone:el,datum:tl,on:sl,dispatch:cl,[Symbol.iterator]:ul};function st(e){return typeof e=="string"?new nt([[document.querySelector(e)]],[document.documentElement]):new nt([[e]],pr)}function fl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ut(e,t){if(e=fl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const hl={passive:!1},ln={capture:!0,passive:!1};function di(e){e.stopImmediatePropagation()}function Lt(e){e.preventDefault(),e.stopImmediatePropagation()}function wr(e){var t=e.document.documentElement,n=st(e).on("dragstart.drag",Lt,ln);"onselectstart"in t?n.on("selectstart.drag",Lt,ln):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function xr(e,t){var n=e.document.documentElement,i=st(e).on("dragstart.drag",null);t&&(i.on("click.drag",Lt,ln),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const kn=e=>()=>e;function Si(e,{sourceEvent:t,subject:n,target:i,identifier:o,active:a,x:s,y:r,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:r,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Si.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function gl(e){return!e.ctrlKey&&!e.button}function ml(){return this.parentNode}function yl(e,t){return t??{x:e.x,y:e.y}}function vl(){return navigator.maxTouchPoints||"ontouchstart"in this}function pl(){var e=gl,t=ml,n=yl,i=vl,o={},a=jn("start","drag","end"),s=0,r,l,u,c,g=0;function f(x){x.on("mousedown.drag",m).filter(i).on("touchstart.drag",S).on("touchmove.drag",E,hl).on("touchend.drag touchcancel.drag",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(x,P){if(!(c||!e.call(this,x,P))){var T=w(this,t.call(this,x,P),x,P,"mouse");T&&(st(x.view).on("mousemove.drag",b,ln).on("mouseup.drag",k,ln),wr(x.view),di(x),u=!1,r=x.clientX,l=x.clientY,T("start",x))}}function b(x){if(Lt(x),!u){var P=x.clientX-r,T=x.clientY-l;u=P*P+T*T>g}o.mouse("drag",x)}function k(x){st(x.view).on("mousemove.drag mouseup.drag",null),xr(x.view,u),Lt(x),o.mouse("end",x)}function S(x,P){if(e.call(this,x,P)){var T=x.changedTouches,N=t.call(this,x,P),R=T.length,U,I;for(U=0;U<R;++U)(I=w(this,N,x,P,T[U].identifier,T[U]))&&(di(x),I("start",x,T[U]))}}function E(x){var P=x.changedTouches,T=P.length,N,R;for(N=0;N<T;++N)(R=o[P[N].identifier])&&(Lt(x),R("drag",x,P[N]))}function p(x){var P=x.changedTouches,T=P.length,N,R;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),N=0;N<T;++N)(R=o[P[N].identifier])&&(di(x),R("end",x,P[N]))}function w(x,P,T,N,R,U){var I=a.copy(),W=ut(U||T,P),O,D,y;if((y=n.call(x,new Si("beforestart",{sourceEvent:T,target:f,identifier:R,active:s,x:W[0],y:W[1],dx:0,dy:0,dispatch:I}),N))!=null)return O=y.x-W[0]||0,D=y.y-W[1]||0,function z(v,_,C){var M=W,H;switch(v){case"start":o[R]=z,H=s++;break;case"end":delete o[R],--s;case"drag":W=ut(C||_,P),H=s;break}I.call(v,x,new Si(v,{sourceEvent:_,subject:y,target:f,identifier:R,active:H,x:W[0]+O,y:W[1]+D,dx:W[0]-M[0],dy:W[1]-M[1],dispatch:I}),N)}}return f.filter=function(x){return arguments.length?(e=typeof x=="function"?x:kn(!!x),f):e},f.container=function(x){return arguments.length?(t=typeof x=="function"?x:kn(x),f):t},f.subject=function(x){return arguments.length?(n=typeof x=="function"?x:kn(x),f):n},f.touchable=function(x){return arguments.length?(i=typeof x=="function"?x:kn(!!x),f):i},f.on=function(){var x=a.on.apply(a,arguments);return x===a?f:x},f.clickDistance=function(x){return arguments.length?(g=(x=+x)*x,f):Math.sqrt(g)},f}function Fi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function br(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function vn(){}var cn=.7,Rn=1/cn,Bt="\\s*([+-]?\\d+)\\s*",un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wl=/^#([0-9a-f]{3,8})$/,xl=new RegExp(`^rgb\\(${Bt},${Bt},${Bt}\\)$`),bl=new RegExp(`^rgb\\(${mt},${mt},${mt}\\)$`),_l=new RegExp(`^rgba\\(${Bt},${Bt},${Bt},${un}\\)$`),kl=new RegExp(`^rgba\\(${mt},${mt},${mt},${un}\\)$`),El=new RegExp(`^hsl\\(${un},${mt},${mt}\\)$`),Sl=new RegExp(`^hsla\\(${un},${mt},${mt},${un}\\)$`),_o={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fi(vn,dn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ko,formatHex:ko,formatHex8:Cl,formatHsl:Ml,formatRgb:Eo,toString:Eo});function ko(){return this.rgb().formatHex()}function Cl(){return this.rgb().formatHex8()}function Ml(){return _r(this).formatHsl()}function Eo(){return this.rgb().formatRgb()}function dn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=wl.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?So(t):n===3?new $e(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?En(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?En(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=xl.exec(e))?new $e(t[1],t[2],t[3],1):(t=bl.exec(e))?new $e(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_l.exec(e))?En(t[1],t[2],t[3],t[4]):(t=kl.exec(e))?En(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=El.exec(e))?Po(t[1],t[2]/100,t[3]/100,1):(t=Sl.exec(e))?Po(t[1],t[2]/100,t[3]/100,t[4]):_o.hasOwnProperty(e)?So(_o[e]):e==="transparent"?new $e(NaN,NaN,NaN,0):null}function So(e){return new $e(e>>16&255,e>>8&255,e&255,1)}function En(e,t,n,i){return i<=0&&(e=t=n=NaN),new $e(e,t,n,i)}function Pl(e){return e instanceof vn||(e=dn(e)),e?(e=e.rgb(),new $e(e.r,e.g,e.b,e.opacity)):new $e}function Ci(e,t,n,i){return arguments.length===1?Pl(e):new $e(e,t,n,i??1)}function $e(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Fi($e,Ci,br(vn,{brighter(e){return e=e==null?Rn:Math.pow(Rn,e),new $e(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?cn:Math.pow(cn,e),new $e(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $e(Tt(this.r),Tt(this.g),Tt(this.b),Vn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Co,formatHex:Co,formatHex8:zl,formatRgb:Mo,toString:Mo}));function Co(){return`#${Nt(this.r)}${Nt(this.g)}${Nt(this.b)}`}function zl(){return`#${Nt(this.r)}${Nt(this.g)}${Nt(this.b)}${Nt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mo(){const e=Vn(this.opacity);return`${e===1?"rgb(":"rgba("}${Tt(this.r)}, ${Tt(this.g)}, ${Tt(this.b)}${e===1?")":`, ${e})`}`}function Vn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Nt(e){return e=Tt(e),(e<16?"0":"")+e.toString(16)}function Po(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new dt(e,t,n,i)}function _r(e){if(e instanceof dt)return new dt(e.h,e.s,e.l,e.opacity);if(e instanceof vn||(e=dn(e)),!e)return new dt;if(e instanceof dt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,r=a-o,l=(a+o)/2;return r?(t===a?s=(n-i)/r+(n<i)*6:n===a?s=(i-t)/r+2:s=(t-n)/r+4,r/=l<.5?a+o:2-a-o,s*=60):r=l>0&&l<1?0:s,new dt(s,r,l,e.opacity)}function Nl(e,t,n,i){return arguments.length===1?_r(e):new dt(e,t,n,i??1)}function dt(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Fi(dt,Nl,br(vn,{brighter(e){return e=e==null?Rn:Math.pow(Rn,e),new dt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?cn:Math.pow(cn,e),new dt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,o=2*n-i;return new $e(fi(e>=240?e-240:e+120,o,i),fi(e,o,i),fi(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new dt(zo(this.h),Sn(this.s),Sn(this.l),Vn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Vn(this.opacity);return`${e===1?"hsl(":"hsla("}${zo(this.h)}, ${Sn(this.s)*100}%, ${Sn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function zo(e){return e=(e||0)%360,e<0?e+360:e}function Sn(e){return Math.max(0,Math.min(1,e||0))}function fi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const kr=e=>()=>e;function Tl(e,t){return function(n){return e+n*t}}function Al(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Ol(e){return(e=+e)==1?Er:function(t,n){return n-t?Al(t,n,e):kr(isNaN(t)?n:t)}}function Er(e,t){var n=t-e;return n?Tl(e,n):kr(isNaN(e)?t:e)}const No=function e(t){var n=Ol(t);function i(o,a){var s=n((o=Ci(o)).r,(a=Ci(a)).r),r=n(o.g,a.g),l=n(o.b,a.b),u=Er(o.opacity,a.opacity);return function(c){return o.r=s(c),o.g=r(c),o.b=l(c),o.opacity=u(c),o+""}}return i.gamma=e,i}(1);function Et(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Mi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hi=new RegExp(Mi.source,"g");function Hl(e){return function(){return e}}function Il(e){return function(t){return e(t)+""}}function Dl(e,t){var n=Mi.lastIndex=hi.lastIndex=0,i,o,a,s=-1,r=[],l=[];for(e=e+"",t=t+"";(i=Mi.exec(e))&&(o=hi.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),r[s]?r[s]+=a:r[++s]=a),(i=i[0])===(o=o[0])?r[s]?r[s]+=o:r[++s]=o:(r[++s]=null,l.push({i:s,x:Et(i,o)})),n=hi.lastIndex;return n<t.length&&(a=t.slice(n),r[s]?r[s]+=a:r[++s]=a),r.length<2?l[0]?Il(l[0].x):Hl(t):(t=l.length,function(u){for(var c=0,g;c<t;++c)r[(g=l[c]).i]=g.x(u);return r.join("")})}var To=180/Math.PI,Pi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sr(e,t,n,i,o,a){var s,r,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(r=Math.sqrt(n*n+i*i))&&(n/=r,i/=r,l/=r),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*To,skewX:Math.atan(l)*To,scaleX:s,scaleY:r}}var Cn;function Rl(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Pi:Sr(t.a,t.b,t.c,t.d,t.e,t.f)}function Vl(e){return e==null||(Cn||(Cn=document.createElementNS("http://www.w3.org/2000/svg","g")),Cn.setAttribute("transform",e),!(e=Cn.transform.baseVal.consolidate()))?Pi:(e=e.matrix,Sr(e.a,e.b,e.c,e.d,e.e,e.f))}function Cr(e,t,n,i){function o(u){return u.length?u.pop()+" ":""}function a(u,c,g,f,m,b){if(u!==g||c!==f){var k=m.push("translate(",null,t,null,n);b.push({i:k-4,x:Et(u,g)},{i:k-2,x:Et(c,f)})}else(g||f)&&m.push("translate("+g+t+f+n)}function s(u,c,g,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:g.push(o(g)+"rotate(",null,i)-2,x:Et(u,c)})):c&&g.push(o(g)+"rotate("+c+i)}function r(u,c,g,f){u!==c?f.push({i:g.push(o(g)+"skewX(",null,i)-2,x:Et(u,c)}):c&&g.push(o(g)+"skewX("+c+i)}function l(u,c,g,f,m,b){if(u!==g||c!==f){var k=m.push(o(m)+"scale(",null,",",null,")");b.push({i:k-4,x:Et(u,g)},{i:k-2,x:Et(c,f)})}else(g!==1||f!==1)&&m.push(o(m)+"scale("+g+","+f+")")}return function(u,c){var g=[],f=[];return u=e(u),c=e(c),a(u.translateX,u.translateY,c.translateX,c.translateY,g,f),s(u.rotate,c.rotate,g,f),r(u.skewX,c.skewX,g,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,g,f),u=c=null,function(m){for(var b=-1,k=f.length,S;++b<k;)g[(S=f[b]).i]=S.x(m);return g.join("")}}}var Xl=Cr(Rl,"px, ","px)","deg)"),Yl=Cr(Vl,", ",")",")"),Ll=1e-12;function Ao(e){return((e=Math.exp(e))+1/e)/2}function Bl(e){return((e=Math.exp(e))-1/e)/2}function Wl(e){return((e=Math.exp(2*e))-1)/(e+1)}const Kl=function e(t,n,i){function o(a,s){var r=a[0],l=a[1],u=a[2],c=s[0],g=s[1],f=s[2],m=c-r,b=g-l,k=m*m+b*b,S,E;if(k<Ll)E=Math.log(f/u)/t,S=function(N){return[r+N*m,l+N*b,u*Math.exp(t*N*E)]};else{var p=Math.sqrt(k),w=(f*f-u*u+i*k)/(2*u*n*p),x=(f*f-u*u-i*k)/(2*f*n*p),P=Math.log(Math.sqrt(w*w+1)-w),T=Math.log(Math.sqrt(x*x+1)-x);E=(T-P)/t,S=function(N){var R=N*E,U=Ao(P),I=u/(n*p)*(U*Wl(t*R+P)-Bl(P));return[r+I*m,l+I*b,u*U/Ao(t*R+P)]}}return S.duration=E*1e3*t/Math.SQRT2,S}return o.rho=function(a){var s=Math.max(.001,+a),r=s*s,l=r*r;return e(s,r,l)},o}(Math.SQRT2,2,4);var qt=0,rn=0,nn=0,Mr=1e3,Xn,sn,Yn=0,Ot=0,ei=0,fn=typeof performance=="object"&&performance.now?performance:Date,Pr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Zi(){return Ot||(Pr(Fl),Ot=fn.now()+ei)}function Fl(){Ot=0}function Ln(){this._call=this._time=this._next=null}Ln.prototype=zr.prototype={constructor:Ln,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Zi():+n)+(t==null?0:+t),!this._next&&sn!==this&&(sn?sn._next=this:Xn=this,sn=this),this._call=e,this._time=n,zi()},stop:function(){this._call&&(this._call=null,this._time=1/0,zi())}};function zr(e,t,n){var i=new Ln;return i.restart(e,t,n),i}function Zl(){Zi(),++qt;for(var e=Xn,t;e;)(t=Ot-e._time)>=0&&e._call.call(void 0,t),e=e._next;--qt}function Oo(){Ot=(Yn=fn.now())+ei,qt=rn=0;try{Zl()}finally{qt=0,Gl(),Ot=0}}function ql(){var e=fn.now(),t=e-Yn;t>Mr&&(ei-=t,Yn=e)}function Gl(){for(var e,t=Xn,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Xn=n);sn=e,zi(i)}function zi(e){if(!qt){rn&&(rn=clearTimeout(rn));var t=e-Ot;t>24?(e<1/0&&(rn=setTimeout(Oo,e-fn.now()-ei)),nn&&(nn=clearInterval(nn))):(nn||(Yn=fn.now(),nn=setInterval(ql,Mr)),qt=1,Pr(Oo))}}function Ho(e,t,n){var i=new Ln;return t=t==null?0:+t,i.restart(o=>{i.stop(),e(o+t)},t,n),i}var Ul=jn("start","end","cancel","interrupt"),Jl=[],Nr=0,Io=1,Ni=2,Tn=3,Do=4,Ti=5,An=6;function ti(e,t,n,i,o,a){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Ql(e,n,{name:t,index:i,group:o,on:Ul,tween:Jl,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Nr})}function qi(e,t){var n=ht(e,t);if(n.state>Nr)throw new Error("too late; already scheduled");return n}function yt(e,t){var n=ht(e,t);if(n.state>Tn)throw new Error("too late; already running");return n}function ht(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ql(e,t,n){var i=e.__transition,o;i[t]=n,n.timer=zr(a,0,n.time);function a(u){n.state=Io,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,g,f,m;if(n.state!==Io)return l();for(c in i)if(m=i[c],m.name===n.name){if(m.state===Tn)return Ho(s);m.state===Do?(m.state=An,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete i[c]):+c<t&&(m.state=An,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete i[c])}if(Ho(function(){n.state===Tn&&(n.state=Do,n.timer.restart(r,n.delay,n.time),r(u))}),n.state=Ni,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ni){for(n.state=Tn,o=new Array(f=n.tween.length),c=0,g=-1;c<f;++c)(m=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++g]=m);o.length=g+1}}function r(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Ti,1),g=-1,f=o.length;++g<f;)o[g].call(e,c);n.state===Ti&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=An,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function On(e,t){var n=e.__transition,i,o,a=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((i=n[s]).name!==t){a=!1;continue}o=i.state>Ni&&i.state<Ti,i.state=An,i.timer.stop(),i.on.call(o?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[s]}a&&delete e.__transition}}function jl(e){return this.each(function(){On(this,e)})}function $l(e,t){var n,i;return function(){var o=yt(this,e),a=o.tween;if(a!==n){i=n=a;for(var s=0,r=i.length;s<r;++s)if(i[s].name===t){i=i.slice(),i.splice(s,1);break}}o.tween=i}}function ec(e,t,n){var i,o;if(typeof n!="function")throw new Error;return function(){var a=yt(this,e),s=a.tween;if(s!==i){o=(i=s).slice();for(var r={name:t,value:n},l=0,u=o.length;l<u;++l)if(o[l].name===t){o[l]=r;break}l===u&&o.push(r)}a.tween=o}}function tc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=ht(this.node(),n).tween,o=0,a=i.length,s;o<a;++o)if((s=i[o]).name===e)return s.value;return null}return this.each((t==null?$l:ec)(n,e,t))}function Gi(e,t,n){var i=e._id;return e.each(function(){var o=yt(this,i);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return ht(o,i).value[t]}}function Tr(e,t){var n;return(typeof t=="number"?Et:t instanceof dn?No:(n=dn(t))?(t=n,No):Dl)(e,t)}function nc(e){return function(){this.removeAttribute(e)}}function ic(e){return function(){this.removeAttributeNS(e.space,e.local)}}function oc(e,t,n){var i,o=n+"",a;return function(){var s=this.getAttribute(e);return s===o?null:s===i?a:a=t(i=s,n)}}function rc(e,t,n){var i,o=n+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===i?a:a=t(i=s,n)}}function sc(e,t,n){var i,o,a;return function(){var s,r=n(this),l;return r==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=r+"",s===l?null:s===i&&l===o?a:(o=l,a=t(i=s,r)))}}function ac(e,t,n){var i,o,a;return function(){var s,r=n(this),l;return r==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=r+"",s===l?null:s===i&&l===o?a:(o=l,a=t(i=s,r)))}}function lc(e,t){var n=$n(e),i=n==="transform"?Yl:Tr;return this.attrTween(e,typeof t=="function"?(n.local?ac:sc)(n,i,Gi(this,"attr."+e,t)):t==null?(n.local?ic:nc)(n):(n.local?rc:oc)(n,i,t))}function cc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function uc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function dc(e,t){var n,i;function o(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&uc(e,a)),n}return o._value=t,o}function fc(e,t){var n,i;function o(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&cc(e,a)),n}return o._value=t,o}function hc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=$n(e);return this.tween(n,(i.local?dc:fc)(i,t))}function gc(e,t){return function(){qi(this,e).delay=+t.apply(this,arguments)}}function mc(e,t){return t=+t,function(){qi(this,e).delay=t}}function yc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gc:mc)(t,e)):ht(this.node(),t).delay}function vc(e,t){return function(){yt(this,e).duration=+t.apply(this,arguments)}}function pc(e,t){return t=+t,function(){yt(this,e).duration=t}}function wc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?vc:pc)(t,e)):ht(this.node(),t).duration}function xc(e,t){if(typeof t!="function")throw new Error;return function(){yt(this,e).ease=t}}function bc(e){var t=this._id;return arguments.length?this.each(xc(t,e)):ht(this.node(),t).ease}function _c(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;yt(this,e).ease=n}}function kc(e){if(typeof e!="function")throw new Error;return this.each(_c(this._id,e))}function Ec(e){typeof e!="function"&&(e=cr(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var a=t[o],s=a.length,r=i[o]=[],l,u=0;u<s;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&r.push(l);return new _t(i,this._parents,this._name,this._id)}function Sc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,o=n.length,a=Math.min(i,o),s=new Array(i),r=0;r<a;++r)for(var l=t[r],u=n[r],c=l.length,g=s[r]=new Array(c),f,m=0;m<c;++m)(f=l[m]||u[m])&&(g[m]=f);for(;r<i;++r)s[r]=t[r];return new _t(s,this._parents,this._name,this._id)}function Cc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Mc(e,t,n){var i,o,a=Cc(t)?qi:yt;return function(){var s=a(this,e),r=s.on;r!==i&&(o=(i=r).copy()).on(t,n),s.on=o}}function Pc(e,t){var n=this._id;return arguments.length<2?ht(this.node(),n).on.on(e):this.each(Mc(n,e,t))}function zc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Nc(){return this.on("end.remove",zc(this._id))}function Tc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wi(e));for(var i=this._groups,o=i.length,a=new Array(o),s=0;s<o;++s)for(var r=i[s],l=r.length,u=a[s]=new Array(l),c,g,f=0;f<l;++f)(c=r[f])&&(g=e.call(c,c.__data__,f,r))&&("__data__"in c&&(g.__data__=c.__data__),u[f]=g,ti(u[f],t,n,f,u,ht(c,n)));return new _t(a,this._parents,t,n)}function Ac(e){var t=this._name,n=this._id;typeof e!="function"&&(e=lr(e));for(var i=this._groups,o=i.length,a=[],s=[],r=0;r<o;++r)for(var l=i[r],u=l.length,c,g=0;g<u;++g)if(c=l[g]){for(var f=e.call(c,c.__data__,g,l),m,b=ht(c,n),k=0,S=f.length;k<S;++k)(m=f[k])&&ti(m,t,n,k,f,b);a.push(f),s.push(c)}return new _t(a,s,t,n)}var Oc=yn.prototype.constructor;function Hc(){return new Oc(this._groups,this._parents)}function Ic(e,t){var n,i,o;return function(){var a=Zt(this,e),s=(this.style.removeProperty(e),Zt(this,e));return a===s?null:a===n&&s===i?o:o=t(n=a,i=s)}}function Ar(e){return function(){this.style.removeProperty(e)}}function Dc(e,t,n){var i,o=n+"",a;return function(){var s=Zt(this,e);return s===o?null:s===i?a:a=t(i=s,n)}}function Rc(e,t,n){var i,o,a;return function(){var s=Zt(this,e),r=n(this),l=r+"";return r==null&&(l=r=(this.style.removeProperty(e),Zt(this,e))),s===l?null:s===i&&l===o?a:(o=l,a=t(i=s,r))}}function Vc(e,t){var n,i,o,a="style."+t,s="end."+a,r;return function(){var l=yt(this,e),u=l.on,c=l.value[a]==null?r||(r=Ar(t)):void 0;(u!==n||o!==c)&&(i=(n=u).copy()).on(s,o=c),l.on=i}}function Xc(e,t,n){var i=(e+="")=="transform"?Xl:Tr;return t==null?this.styleTween(e,Ic(e,i)).on("end.style."+e,Ar(e)):typeof t=="function"?this.styleTween(e,Rc(e,i,Gi(this,"style."+e,t))).each(Vc(this._id,e)):this.styleTween(e,Dc(e,i,t),n).on("end.style."+e,null)}function Yc(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Lc(e,t,n){var i,o;function a(){var s=t.apply(this,arguments);return s!==o&&(i=(o=s)&&Yc(e,s,n)),i}return a._value=t,a}function Bc(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Lc(e,t,n??""))}function Wc(e){return function(){this.textContent=e}}function Kc(e){return function(){var t=e(this);this.textContent=t??""}}function Fc(e){return this.tween("text",typeof e=="function"?Kc(Gi(this,"text",e)):Wc(e==null?"":e+""))}function Zc(e){return function(t){this.textContent=e.call(this,t)}}function qc(e){var t,n;function i(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&Zc(o)),t}return i._value=e,i}function Gc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,qc(e))}function Uc(){for(var e=this._name,t=this._id,n=Or(),i=this._groups,o=i.length,a=0;a<o;++a)for(var s=i[a],r=s.length,l,u=0;u<r;++u)if(l=s[u]){var c=ht(l,t);ti(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new _t(i,this._parents,e,n)}function Jc(){var e,t,n=this,i=n._id,o=n.size();return new Promise(function(a,s){var r={value:s},l={value:function(){--o===0&&a()}};n.each(function(){var u=yt(this,i),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(r),t._.interrupt.push(r),t._.end.push(l)),u.on=t}),o===0&&a()})}var Qc=0;function _t(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Or(){return++Qc}var pt=yn.prototype;_t.prototype={constructor:_t,select:Tc,selectAll:Ac,selectChild:pt.selectChild,selectChildren:pt.selectChildren,filter:Ec,merge:Sc,selection:Hc,transition:Uc,call:pt.call,nodes:pt.nodes,node:pt.node,size:pt.size,empty:pt.empty,each:pt.each,on:Pc,attr:lc,attrTween:hc,style:Xc,styleTween:Bc,text:Fc,textTween:Gc,remove:Nc,tween:tc,delay:yc,duration:wc,ease:bc,easeVarying:kc,end:Jc,[Symbol.iterator]:pt[Symbol.iterator]};function jc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var $c={time:null,delay:0,duration:250,ease:jc};function eu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function tu(e){var t,n;e instanceof _t?(t=e._id,e=e._name):(t=Or(),(n=$c).time=Zi(),e=e==null?null:e+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var s=i[a],r=s.length,l,u=0;u<r;++u)(l=s[u])&&ti(l,e,t,u,s,n||eu(l,t));return new _t(i,this._parents,e,t)}yn.prototype.interrupt=jl;yn.prototype.transition=tu;const Mn=e=>()=>e;function nu(e,{sourceEvent:t,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function xt(e,t,n){this.k=e,this.x=t,this.y=n}xt.prototype={constructor:xt,scale:function(e){return e===1?this:new xt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new xt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ni=new xt(1,0,0);Hr.prototype=xt.prototype;function Hr(e){for(;!e.__zoom;)if(!(e=e.parentNode))return ni;return e.__zoom}function gi(e){e.stopImmediatePropagation()}function on(e){e.preventDefault(),e.stopImmediatePropagation()}function iu(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ou(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ro(){return this.__zoom||ni}function ru(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function su(){return navigator.maxTouchPoints||"ontouchstart"in this}function au(e,t,n){var i=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function Ir(){var e=iu,t=ou,n=au,i=ru,o=su,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],r=250,l=Kl,u=jn("start","zoom","end"),c,g,f,m=500,b=150,k=0,S=10;function E(y){y.property("__zoom",Ro).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",I).filter(o).on("touchstart.zoom",W).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(y,z,v,_){var C=y.selection?y.selection():y;C.property("__zoom",Ro),y!==C?P(y,z,v,_):C.interrupt().each(function(){T(this,arguments).event(_).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},E.scaleBy=function(y,z,v,_){E.scaleTo(y,function(){var C=this.__zoom.k,M=typeof z=="function"?z.apply(this,arguments):z;return C*M},v,_)},E.scaleTo=function(y,z,v,_){E.transform(y,function(){var C=t.apply(this,arguments),M=this.__zoom,H=v==null?x(C):typeof v=="function"?v.apply(this,arguments):v,L=M.invert(H),K=typeof z=="function"?z.apply(this,arguments):z;return n(w(p(M,K),H,L),C,s)},v,_)},E.translateBy=function(y,z,v,_){E.transform(y,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof v=="function"?v.apply(this,arguments):v),t.apply(this,arguments),s)},null,_)},E.translateTo=function(y,z,v,_,C){E.transform(y,function(){var M=t.apply(this,arguments),H=this.__zoom,L=_==null?x(M):typeof _=="function"?_.apply(this,arguments):_;return n(ni.translate(L[0],L[1]).scale(H.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof v=="function"?-v.apply(this,arguments):-v),M,s)},_,C)};function p(y,z){return z=Math.max(a[0],Math.min(a[1],z)),z===y.k?y:new xt(z,y.x,y.y)}function w(y,z,v){var _=z[0]-v[0]*y.k,C=z[1]-v[1]*y.k;return _===y.x&&C===y.y?y:new xt(y.k,_,C)}function x(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function P(y,z,v,_){y.on("start.zoom",function(){T(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(_).end()}).tween("zoom",function(){var C=this,M=arguments,H=T(C,M).event(_),L=t.apply(C,M),K=v==null?x(L):typeof v=="function"?v.apply(C,M):v,ne=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),Y=C.__zoom,B=typeof z=="function"?z.apply(C,M):z,te=l(Y.invert(K).concat(ne/Y.k),B.invert(K).concat(ne/B.k));return function(de){if(de===1)de=B;else{var re=te(de),ye=ne/re[2];de=new xt(ye,K[0]-re[0]*ye,K[1]-re[1]*ye)}H.zoom(null,de)}})}function T(y,z,v){return!v&&y.__zooming||new N(y,z)}function N(y,z){this.that=y,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(y,z),this.taps=0}N.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,z){return this.mouse&&y!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var z=st(this.that).datum();u.call(y,this.that,new nu(y,{sourceEvent:this.sourceEvent,target:E,type:y,transform:this.that.__zoom,dispatch:u}),z)}};function R(y,...z){if(!e.apply(this,arguments))return;var v=T(this,z).event(y),_=this.__zoom,C=Math.max(a[0],Math.min(a[1],_.k*Math.pow(2,i.apply(this,arguments)))),M=ut(y);if(v.wheel)(v.mouse[0][0]!==M[0]||v.mouse[0][1]!==M[1])&&(v.mouse[1]=_.invert(v.mouse[0]=M)),clearTimeout(v.wheel);else{if(_.k===C)return;v.mouse=[M,_.invert(M)],On(this),v.start()}on(y),v.wheel=setTimeout(H,b),v.zoom("mouse",n(w(p(_,C),v.mouse[0],v.mouse[1]),v.extent,s));function H(){v.wheel=null,v.end()}}function U(y,...z){if(f||!e.apply(this,arguments))return;var v=y.currentTarget,_=T(this,z,!0).event(y),C=st(y.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",ne,!0),M=ut(y,v),H=y.clientX,L=y.clientY;wr(y.view),gi(y),_.mouse=[M,this.__zoom.invert(M)],On(this),_.start();function K(Y){if(on(Y),!_.moved){var B=Y.clientX-H,te=Y.clientY-L;_.moved=B*B+te*te>k}_.event(Y).zoom("mouse",n(w(_.that.__zoom,_.mouse[0]=ut(Y,v),_.mouse[1]),_.extent,s))}function ne(Y){C.on("mousemove.zoom mouseup.zoom",null),xr(Y.view,_.moved),on(Y),_.event(Y).end()}}function I(y,...z){if(e.apply(this,arguments)){var v=this.__zoom,_=ut(y.changedTouches?y.changedTouches[0]:y,this),C=v.invert(_),M=v.k*(y.shiftKey?.5:2),H=n(w(p(v,M),_,C),t.apply(this,z),s);on(y),r>0?st(this).transition().duration(r).call(P,H,_,y):st(this).call(E.transform,H,_,y)}}function W(y,...z){if(e.apply(this,arguments)){var v=y.touches,_=v.length,C=T(this,z,y.changedTouches.length===_).event(y),M,H,L,K;for(gi(y),H=0;H<_;++H)L=v[H],K=ut(L,this),K=[K,this.__zoom.invert(K),L.identifier],C.touch0?!C.touch1&&C.touch0[2]!==K[2]&&(C.touch1=K,C.taps=0):(C.touch0=K,M=!0,C.taps=1+!!c);c&&(c=clearTimeout(c)),M&&(C.taps<2&&(g=K[0],c=setTimeout(function(){c=null},m)),On(this),C.start())}}function O(y,...z){if(this.__zooming){var v=T(this,z).event(y),_=y.changedTouches,C=_.length,M,H,L,K;for(on(y),M=0;M<C;++M)H=_[M],L=ut(H,this),v.touch0&&v.touch0[2]===H.identifier?v.touch0[0]=L:v.touch1&&v.touch1[2]===H.identifier&&(v.touch1[0]=L);if(H=v.that.__zoom,v.touch1){var ne=v.touch0[0],Y=v.touch0[1],B=v.touch1[0],te=v.touch1[1],de=(de=B[0]-ne[0])*de+(de=B[1]-ne[1])*de,re=(re=te[0]-Y[0])*re+(re=te[1]-Y[1])*re;H=p(H,Math.sqrt(de/re)),L=[(ne[0]+B[0])/2,(ne[1]+B[1])/2],K=[(Y[0]+te[0])/2,(Y[1]+te[1])/2]}else if(v.touch0)L=v.touch0[0],K=v.touch0[1];else return;v.zoom("touch",n(w(H,L,K),v.extent,s))}}function D(y,...z){if(this.__zooming){var v=T(this,z).event(y),_=y.changedTouches,C=_.length,M,H;for(gi(y),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),M=0;M<C;++M)H=_[M],v.touch0&&v.touch0[2]===H.identifier?delete v.touch0:v.touch1&&v.touch1[2]===H.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(H=ut(H,this),Math.hypot(g[0]-H[0],g[1]-H[1])<S)){var L=st(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return E.wheelDelta=function(y){return arguments.length?(i=typeof y=="function"?y:Mn(+y),E):i},E.filter=function(y){return arguments.length?(e=typeof y=="function"?y:Mn(!!y),E):e},E.touchable=function(y){return arguments.length?(o=typeof y=="function"?y:Mn(!!y),E):o},E.extent=function(y){return arguments.length?(t=typeof y=="function"?y:Mn([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),E):t},E.scaleExtent=function(y){return arguments.length?(a[0]=+y[0],a[1]=+y[1],E):[a[0],a[1]]},E.translateExtent=function(y){return arguments.length?(s[0][0]=+y[0][0],s[1][0]=+y[1][0],s[0][1]=+y[0][1],s[1][1]=+y[1][1],E):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},E.constrain=function(y){return arguments.length?(n=y,E):n},E.duration=function(y){return arguments.length?(r=+y,E):r},E.interpolate=function(y){return arguments.length?(l=y,E):l},E.on=function(){var y=u.on.apply(u,arguments);return y===u?E:y},E.clickDistance=function(y){return arguments.length?(k=(y=+y)*y,E):Math.sqrt(k)},E.tapDistance=function(y){return arguments.length?(S=+y,E):S},E}const pn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},Bn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Ht;(function(e){e.Strict="strict",e.Loose="loose"})(Ht||(Ht={}));var Ct;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ct||(Ct={}));var Wn;(function(e){e.Partial="partial",e.Full="full"})(Wn||(Wn={}));const Ai={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Wt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Wt||(Wt={}));var Kn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Kn||(Kn={}));var oe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(oe||(oe={}));const Vo={[oe.Left]:oe.Right,[oe.Right]:oe.Left,[oe.Top]:oe.Bottom,[oe.Bottom]:oe.Top};function lu(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Xo(e,t,n){if(!n)return;const i=[];e.forEach((o,a)=>{t!=null&&t.has(a)||i.push(o)}),i.length&&n(i)}function cu(e){return e===null?null:e?"valid":"invalid"}const uu=e=>"id"in e&&"source"in e&&"target"in e,Dr=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),wn=(e,t=[0,0])=>{const{width:n,height:i}=Pt(e),o=e.origin??t,a=n*o[0],s=i*o[1];return{x:e.position.x-a,y:e.position.y-s}},xn=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(i=>{if(t.filter===void 0||t.filter(i)){const o=Ii(i);n=Ui(n,o)}}),Ji(n)},Rr=(e,t,[n,i,o]=[0,0,1],a=!1,s=!1)=>{const r={...oi(t,[n,i,o]),width:t.width/o,height:t.height/o},l=[];for(const u of e.values()){const{measured:c,selectable:g=!0,hidden:f=!1}=u;if(s&&!g||f)continue;const m=c.width??u.width??u.initialWidth??null,b=c.height??u.height??u.initialHeight??null,k=Qi(r,ii(u)),S=(m??0)*(b??0),E=a&&k>0;(!u.internals.handleBounds||E||k>=S||u.dragging)&&l.push(u)}return l},Oi=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function Yo(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!o.hidden)&&(!i||i.has(o.id))&&n.set(o.id,o)}),n}async function Lo({nodes:e,width:t,height:n,panZoom:i,minZoom:o,maxZoom:a},s){if(e.size===0)return Promise.resolve(!1);const r=xn(e),l=Lr(r,t,n,(s==null?void 0:s.minZoom)??o,(s==null?void 0:s.maxZoom)??a,(s==null?void 0:s.padding)??.1);return await i.setViewport(l,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function du({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:o,onError:a}){const s=n.get(e),r=s.parentId?n.get(s.parentId):void 0,{x:l,y:u}=r?r.internals.positionAbsolute:{x:0,y:0},c=s.origin??i;let g=o;if(s.extent==="parent"&&!s.expandParent)if(!r)a==null||a("005",pn.error005());else{const m=r.measured.width,b=r.measured.height;m&&b&&(g=[[l,u],[l+m,u+b]])}else r&&Ut(s.extent)&&(g=[[s.extent[0][0]+l,s.extent[0][1]+u],[s.extent[1][0]+l,s.extent[1][1]+u]]);const f=Ut(g)?It(t,g,s.measured):t;return{position:{x:f.x-l+s.measured.width*c[0],y:f.y-u+s.measured.height*c[1]},positionAbsolute:f}}async function fu({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:o}){const a=new Set(e.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const m=a.has(f.id),b=!m&&f.parentId&&s.find(k=>k.id===f.parentId);(m||b)&&s.push(f)}const r=new Set(t.map(f=>f.id)),l=i.filter(f=>f.deletable!==!1),c=Oi(s,l);for(const f of l)r.has(f.id)&&!c.find(b=>b.id===f.id)&&c.push(f);if(!o)return{edges:c,nodes:s};const g=await o({nodes:s,edges:c});return typeof g=="boolean"?g?{edges:c,nodes:s}:{edges:[],nodes:[]}:g}const Gt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),It=(e={x:0,y:0},t,n)=>({x:Gt(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Gt(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Vr(e,t,n){const{width:i,height:o}=Pt(n),{x:a,y:s}=n.internals.positionAbsolute;return It(e,[[a,s],[a+i,s+o]],t)}const Bo=(e,t,n)=>e<t?Gt(Math.abs(e-t),1,t)/t:e>n?-Gt(Math.abs(e-n),1,t)/t:0,Xr=(e,t,n=15,i=40)=>{const o=Bo(e.x,i,t.width-i)*n,a=Bo(e.y,i,t.height-i)*n;return[o,a]},Ui=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Hi=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),Ji=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),ii=(e,t=[0,0])=>{var o,a;const{x:n,y:i}=Dr(e)?e.internals.positionAbsolute:wn(e,t);return{x:n,y:i,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0}},Ii=(e,t=[0,0])=>{var o,a;const{x:n,y:i}=Dr(e)?e.internals.positionAbsolute:wn(e,t);return{x:n,y:i,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:i+(((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0)}},Yr=(e,t)=>Ji(Ui(Hi(e),Hi(t))),Qi=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},hn=e=>!isNaN(e)&&isFinite(e),hu=(e,t)=>{},ji=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),oi=({x:e,y:t},[n,i,o],a=!1,s=[1,1])=>{const r={x:(e-n)/o,y:(t-i)/o};return a?ji(r,s):r},gu=({x:e,y:t},[n,i,o])=>({x:e*o+n,y:t*o+i}),Lr=(e,t,n,i,o,a)=>{const s=t/(e.width*(1+a)),r=n/(e.height*(1+a)),l=Math.min(s,r),u=Gt(l,i,o),c=e.x+e.width/2,g=e.y+e.height/2,f=t/2-c*u,m=n/2-g*u;return{x:f,y:m,zoom:u}},Fn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ut(e){return e!==void 0&&e!=="parent"}function Pt(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Br(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function mi(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:o}){const{x:a,y:s}=bt(e),r=oi({x:a-((o==null?void 0:o.left)??0),y:s-((o==null?void 0:o.top)??0)},i),{x:l,y:u}=n?ji(r,t):r;return{xSnapped:l,ySnapped:u,...r}}const $i=e=>({width:e.offsetWidth,height:e.offsetHeight}),mu=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},yu=["INPUT","SELECT","TEXTAREA"];function vu(e){var i,o,a;const t=((o=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:o[0])||e.target;return yu.includes(t==null?void 0:t.nodeName)||((a=t==null?void 0:t.hasAttribute)==null?void 0:a.call(t,"contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const Wr=e=>"clientX"in e,bt=(e,t)=>{var a,s;const n=Wr(e),i=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Wo=(e,t,n,i,o)=>{const a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(s=>{const r=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:o,position:s.getAttribute("data-handlepos"),x:(r.left-n.left)/i,y:(r.top-n.top)/i,...$i(s)}})};function pu({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:s,targetControlY:r}){const l=e*.125+o*.375+s*.375+n*.125,u=t*.125+a*.375+r*.375+i*.125,c=Math.abs(l-e),g=Math.abs(u-t);return[l,u,c,g]}function Pn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ko({pos:e,x1:t,y1:n,x2:i,y2:o,c:a}){switch(e){case oe.Left:return[t-Pn(t-i,a),n];case oe.Right:return[t+Pn(i-t,a),n];case oe.Top:return[t,n-Pn(n-o,a)];case oe.Bottom:return[t,n+Pn(o-n,a)]}}function Kr({sourceX:e,sourceY:t,sourcePosition:n=oe.Bottom,targetX:i,targetY:o,targetPosition:a=oe.Top,curvature:s=.25}){const[r,l]=Ko({pos:n,x1:e,y1:t,x2:i,y2:o,c:s}),[u,c]=Ko({pos:a,x1:i,y1:o,x2:e,y2:t,c:s}),[g,f,m,b]=pu({sourceX:e,sourceY:t,targetX:i,targetY:o,sourceControlX:r,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${r},${l} ${u},${c} ${i},${o}`,g,f,m,b]}function Fr({sourceX:e,sourceY:t,targetX:n,targetY:i}){const o=Math.abs(n-e)/2,a=n<e?n+o:n-o,s=Math.abs(i-t)/2,r=i<t?i+s:i-s;return[a,r,o,s]}function wu({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:o=!1}){if(!o)return i;const a=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return i+(a?s:0)}function xu({sourceNode:e,targetNode:t,width:n,height:i,transform:o}){const a=Ui(Ii(e),Ii(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:i/o[2]};return Qi(s,Ji(a))>0}const bu=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,_u=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),ku=(e,t)=>{if(!e.source||!e.target)return t;let n;return uu(e)?n={...e}:n={...e,id:bu(e)},_u(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Di({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[o,a,s,r]=Fr({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,o,a,s,r]}const Fo={[oe.Left]:{x:-1,y:0},[oe.Right]:{x:1,y:0},[oe.Top]:{x:0,y:-1},[oe.Bottom]:{x:0,y:1}},Eu=({source:e,sourcePosition:t=oe.Bottom,target:n})=>t===oe.Left||t===oe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Zo=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Su({source:e,sourcePosition:t=oe.Bottom,target:n,targetPosition:i=oe.Top,center:o,offset:a}){const s=Fo[t],r=Fo[i],l={x:e.x+s.x*a,y:e.y+s.y*a},u={x:n.x+r.x*a,y:n.y+r.y*a},c=Eu({source:l,sourcePosition:t,target:u}),g=c.x!==0?"x":"y",f=c[g];let m=[],b,k;const S={x:0,y:0},E={x:0,y:0},[p,w,x,P]=Fr({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[g]*r[g]===-1){b=o.x??p,k=o.y??w;const N=[{x:b,y:l.y},{x:b,y:u.y}],R=[{x:l.x,y:k},{x:u.x,y:k}];s[g]===f?m=g==="x"?N:R:m=g==="x"?R:N}else{const N=[{x:l.x,y:u.y}],R=[{x:u.x,y:l.y}];if(g==="x"?m=s.x===f?R:N:m=s.y===f?N:R,t===i){const D=Math.abs(e[g]-n[g]);if(D<=a){const y=Math.min(a-1,a-D);s[g]===f?S[g]=(l[g]>e[g]?-1:1)*y:E[g]=(u[g]>n[g]?-1:1)*y}}if(t!==i){const D=g==="x"?"y":"x",y=s[g]===r[D],z=l[D]>u[D],v=l[D]<u[D];(s[g]===1&&(!y&&z||y&&v)||s[g]!==1&&(!y&&v||y&&z))&&(m=g==="x"?N:R)}const U={x:l.x+S.x,y:l.y+S.y},I={x:u.x+E.x,y:u.y+E.y},W=Math.max(Math.abs(U.x-m[0].x),Math.abs(I.x-m[0].x)),O=Math.max(Math.abs(U.y-m[0].y),Math.abs(I.y-m[0].y));W>=O?(b=(U.x+I.x)/2,k=m[0].y):(b=m[0].x,k=(U.y+I.y)/2)}return[[e,{x:l.x+S.x,y:l.y+S.y},...m,{x:u.x+E.x,y:u.y+E.y},n],b,k,x,P]}function Cu(e,t,n,i){const o=Math.min(Zo(e,t)/2,Zo(t,n)/2,i),{x:a,y:s}=t;if(e.x===a&&a===n.x||e.y===s&&s===n.y)return`L${a} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${a+o*u},${s}Q ${a},${s} ${a},${s+o*c}`}const r=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${a},${s+o*l}Q ${a},${s} ${a+o*r},${s}`}function Zn({sourceX:e,sourceY:t,sourcePosition:n=oe.Bottom,targetX:i,targetY:o,targetPosition:a=oe.Top,borderRadius:s=5,centerX:r,centerY:l,offset:u=20}){const[c,g,f,m,b]=Su({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:o},targetPosition:a,center:{x:r,y:l},offset:u});return[c.reduce((S,E,p)=>{let w="";return p>0&&p<c.length-1?w=Cu(c[p-1],E,c[p+1],s):w=`${p===0?"M":"L"}${E.x} ${E.y}`,S+=w,S},""),g,f,m,b]}function qo(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Mu(e){var g;const{sourceNode:t,targetNode:n}=e;if(!qo(t)||!qo(n))return null;const i=t.internals.handleBounds||Go(t.handles),o=n.internals.handleBounds||Go(n.handles),a=Uo((i==null?void 0:i.source)??[],e.sourceHandle),s=Uo(e.connectionMode===Ht.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!a||!s)return(g=e.onError)==null||g.call(e,"008",pn.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const r=(a==null?void 0:a.position)||oe.Bottom,l=(s==null?void 0:s.position)||oe.Top,u=gn(t,a,r),c=gn(n,s,l);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y,sourcePosition:r,targetPosition:l}}function Go(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function gn(e,t,n=oe.Left,i=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,a=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:r}=t??Pt(e);if(i)return{x:o+s/2,y:a+r/2};switch((t==null?void 0:t.position)??n){case oe.Top:return{x:o+s/2,y:a};case oe.Right:return{x:o+s,y:a+r/2};case oe.Bottom:return{x:o+s/2,y:a+r};case oe.Left:return{x:o,y:a+r/2}}}function Uo(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Ri(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function Pu(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:o}){const a=new Set;return e.reduce((s,r)=>([r.markerStart||i,r.markerEnd||o].forEach(l=>{if(l&&typeof l=="object"){const u=Ri(l,t);a.has(u)||(s.push({id:u,color:l.color||n,...l}),a.add(u))}}),s),[]).sort((s,r)=>s.id.localeCompare(r.id))}const eo={nodeOrigin:[0,0],nodeExtent:Bn,elevateNodesOnSelect:!0,defaults:{}},zu={...eo,checkEquality:!0};function to(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function Nu(e,t,n){const i=to(eo,n);for(const o of e.values())if(o.parentId)no(o,e,t,i);else{const a=wn(o,i.nodeOrigin),s=Ut(o.extent)?o.extent:i.nodeExtent,r=It(a,s,Pt(o));o.internals.positionAbsolute=r}}function Zr(e,t,n,i){var r,l;const o=to(zu,i),a=new Map(t),s=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let c=a.get(u.id);if(o.checkEquality&&u===(c==null?void 0:c.internals.userNode))t.set(u.id,c);else{const g=wn(u,o.nodeOrigin),f=Ut(u.extent)?u.extent:o.nodeExtent,m=It(g,f,Pt(u));c={...o.defaults,...u,measured:{width:(r=u.measured)==null?void 0:r.width,height:(l=u.measured)==null?void 0:l.height},internals:{positionAbsolute:m,handleBounds:u.measured?c==null?void 0:c.internals.handleBounds:void 0,z:qr(u,s),userNode:u}},t.set(u.id,c)}u.parentId&&no(c,t,n,i)}}function Tu(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function no(e,t,n,i){const{elevateNodesOnSelect:o,nodeOrigin:a,nodeExtent:s}=to(eo,i),r=e.parentId,l=t.get(r);if(!l){console.warn(`Parent node ${r} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Tu(e,n);const u=o?1e3:0,{x:c,y:g,z:f}=Au(e,l,a,s,u),{positionAbsolute:m}=e.internals,b=c!==m.x||g!==m.y;(b||f!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:b?{x:c,y:g}:m,z:f})}function qr(e,t){return(hn(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Au(e,t,n,i,o){const{x:a,y:s}=t.internals.positionAbsolute,r=Pt(e),l=wn(e,n),u=Ut(e.extent)?It(l,e.extent,r):l;let c=It({x:a+u.x,y:s+u.y},i,r);e.extent==="parent"&&(c=Vr(c,r,t));const g=qr(e,o),f=t.internals.z??0;return{x:c.x,y:c.y,z:f>g?f:g}}function Ou(e,t,n,i=[0,0]){var s;const o=[],a=new Map;for(const r of e){const l=t.get(r.parentId);if(!l)continue;const u=((s=a.get(r.parentId))==null?void 0:s.expandedRect)??ii(l),c=Yr(u,r.rect);a.set(r.parentId,{expandedRect:c,parent:l})}return a.size>0&&a.forEach(({expandedRect:r,parent:l},u)=>{var w;const c=l.internals.positionAbsolute,g=Pt(l),f=l.origin??i,m=r.x<c.x?Math.round(Math.abs(c.x-r.x)):0,b=r.y<c.y?Math.round(Math.abs(c.y-r.y)):0,k=Math.max(g.width,Math.round(r.width)),S=Math.max(g.height,Math.round(r.height)),E=(k-g.width)*f[0],p=(S-g.height)*f[1];(m>0||b>0||E||p)&&(o.push({id:u,type:"position",position:{x:l.position.x-m+E,y:l.position.y-b+p}}),(w=n.get(u))==null||w.forEach(x=>{e.some(P=>P.id===x.id)||o.push({id:x.id,type:"position",position:{x:x.position.x+m,y:x.position.y+b}})})),(g.width<r.width||g.height<r.height||m||b)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:k+(m?f[0]*m-E:0),height:S+(b?f[1]*b-p:0)}})}),o}function Hu(e,t,n,i,o,a){const s=i==null?void 0:i.querySelector(".xyflow__viewport");let r=!1;if(!s)return{changes:[],updatedInternals:r};const l=[],u=window.getComputedStyle(s),{m22:c}=new window.DOMMatrixReadOnly(u.transform),g=[];for(const f of e.values()){const m=t.get(f.id);if(m)if(m.hidden)m.internals={...m.internals,handleBounds:void 0},r=!0;else{const b=$i(f.nodeElement),k=m.measured.width!==b.width||m.measured.height!==b.height;if(!!(b.width&&b.height&&(k||!m.internals.handleBounds||f.force))){const E=f.nodeElement.getBoundingClientRect(),p=Ut(m.extent)?m.extent:a;let{positionAbsolute:w}=m.internals;m.parentId&&m.extent==="parent"?w=Vr(w,b,t.get(m.parentId)):p&&(w=It(w,p,b)),m.measured=b,m.internals={...m.internals,positionAbsolute:w,handleBounds:{source:Wo("source",f.nodeElement,E,c,m.id),target:Wo("target",f.nodeElement,E,c,m.id)}},m.parentId&&no(m,t,n,{nodeOrigin:o}),r=!0,k&&(l.push({id:m.id,type:"dimensions",dimensions:b}),m.expandParent&&m.parentId&&g.push({id:m.id,parentId:m.parentId,rect:ii(m,o)}))}}}if(g.length>0){const f=Ou(g,t,n,o);l.push(...f)}return{changes:l,updatedInternals:r}}async function Iu({delta:e,panZoom:t,transform:n,translateExtent:i,width:o,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,a]],i),r=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(r)}function Gr(e,t,n){e.clear(),t.clear();for(const i of n){const{source:o,target:a,sourceHandle:s=null,targetHandle:r=null}=i,l=`${o}-source-${s}`,u=`${a}-target-${r}`,c=e.get(l)||new Map,g=e.get(u)||new Map,f={edgeId:i.id,source:o,target:a,sourceHandle:s,targetHandle:r};t.set(i.id,i),e.set(l,c.set(`${a}-${r}`,f)),e.set(u,g.set(`${o}-${s}`,f))}}function Ur(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Ur(n,t):!1}function Jo(e,t,n){let i=e;do{if(i!=null&&i.matches(t))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function Du(e,t,n,i){const o=new Map;for(const[a,s]of e)if((s.selected||s.id===i)&&(!s.parentId||!Ur(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const r=e.get(a);r&&o.set(a,{id:a,position:r.position||{x:0,y:0},distance:{x:n.x-r.internals.positionAbsolute.x,y:n.y-r.internals.positionAbsolute.y},extent:r.extent,parentId:r.parentId,origin:r.origin,expandParent:r.expandParent,internals:{positionAbsolute:r.internals.positionAbsolute||{x:0,y:0}},measured:{width:r.measured.width??0,height:r.measured.height??0}})}return o}function yi({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var s,r,l;const o=[];for(const[u,c]of t){const g=(s=n.get(u))==null?void 0:s.internals.userNode;g&&o.push({...g,position:c.position,dragging:i})}if(!e)return[o[0],o];const a=(r=n.get(e))==null?void 0:r.internals.userNode;return[a?{...a,position:((l=t.get(e))==null?void 0:l.position)||a.position,dragging:i}:o[0],o]}function Ru({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:o}){let a={x:null,y:null},s=0,r=new Map,l=!1,u={x:0,y:0},c=null,g=!1,f=null,m=!1;function b({noDragClassName:S,handleSelector:E,domNode:p,isSelectable:w,nodeId:x,nodeClickDistance:P=0}){f=st(p);function T({x:I,y:W},O){const{nodeLookup:D,nodeExtent:y,snapGrid:z,snapToGrid:v,nodeOrigin:_,onNodeDrag:C,onSelectionDrag:M,onError:H,updateNodePositions:L}=t();a={x:I,y:W};let K=!1,ne={x:0,y:0,x2:0,y2:0};if(r.size>1&&y){const Y=xn(r);ne=Hi(Y)}for(const[Y,B]of r){if(!D.has(Y))continue;let te={x:I-B.distance.x,y:W-B.distance.y};v&&(te=ji(te,z));let de=[[y[0][0],y[0][1]],[y[1][0],y[1][1]]];if(r.size>1&&y&&!B.extent){const{positionAbsolute:G}=B.internals,q=G.x-ne.x+y[0][0],ie=G.x+B.measured.width-ne.x2+y[1][0],Me=G.y-ne.y+y[0][1],Ne=G.y+B.measured.height-ne.y2+y[1][1];de=[[q,Me],[ie,Ne]]}const{position:re,positionAbsolute:ye}=du({nodeId:Y,nextPosition:te,nodeLookup:D,nodeExtent:de,nodeOrigin:_,onError:H});K=K||B.position.x!==re.x||B.position.y!==re.y,B.position=re,B.internals.positionAbsolute=ye}if(K&&(L(r,!0),O&&(i||C||!x&&M))){const[Y,B]=yi({nodeId:x,dragItems:r,nodeLookup:D});i==null||i(O,r,Y,B),C==null||C(O,Y,B),x||M==null||M(O,B)}}async function N(){if(!c)return;const{transform:I,panBy:W,autoPanSpeed:O}=t(),[D,y]=Xr(u,c,O);(D!==0||y!==0)&&(a.x=(a.x??0)-D/I[2],a.y=(a.y??0)-y/I[2],await W({x:D,y})&&T(a,null)),s=requestAnimationFrame(N)}function R(I){var K;const{nodeLookup:W,multiSelectionActive:O,nodesDraggable:D,transform:y,snapGrid:z,snapToGrid:v,selectNodesOnDrag:_,onNodeDragStart:C,onSelectionDragStart:M,unselectNodesAndEdges:H}=t();g=!0,(!_||!w)&&!O&&x&&((K=W.get(x))!=null&&K.selected||H()),w&&_&&x&&(e==null||e(x));const L=mi(I.sourceEvent,{transform:y,snapGrid:z,snapToGrid:v,containerBounds:c});if(a=L,r=Du(W,D,L,x),r.size>0&&(n||C||!x&&M)){const[ne,Y]=yi({nodeId:x,dragItems:r,nodeLookup:W});n==null||n(I.sourceEvent,r,ne,Y),C==null||C(I.sourceEvent,ne,Y),x||M==null||M(I.sourceEvent,Y)}}const U=pl().clickDistance(P).on("start",I=>{const{domNode:W,nodeDragThreshold:O,transform:D,snapGrid:y,snapToGrid:z}=t();c=(W==null?void 0:W.getBoundingClientRect())||null,m=!1,O===0&&R(I),a=mi(I.sourceEvent,{transform:D,snapGrid:y,snapToGrid:z,containerBounds:c}),u=bt(I.sourceEvent,c)}).on("drag",I=>{const{autoPanOnNodeDrag:W,transform:O,snapGrid:D,snapToGrid:y,nodeDragThreshold:z,nodeLookup:v}=t(),_=mi(I.sourceEvent,{transform:O,snapGrid:D,snapToGrid:y,containerBounds:c});if((I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1||x&&!v.has(x))&&(m=!0),!m){if(!l&&W&&g&&(l=!0,N()),!g){const C=_.xSnapped-(a.x??0),M=_.ySnapped-(a.y??0);Math.sqrt(C*C+M*M)>z&&R(I)}(a.x!==_.xSnapped||a.y!==_.ySnapped)&&r&&g&&(u=bt(I.sourceEvent,c),T(_,I.sourceEvent))}}).on("end",I=>{if(!(!g||m)&&(l=!1,g=!1,cancelAnimationFrame(s),r.size>0)){const{nodeLookup:W,updateNodePositions:O,onNodeDragStop:D,onSelectionDragStop:y}=t();if(O(r,!1),o||D||!x&&y){const[z,v]=yi({nodeId:x,dragItems:r,nodeLookup:W,dragging:!1});o==null||o(I.sourceEvent,r,z,v),D==null||D(I.sourceEvent,z,v),x||y==null||y(I.sourceEvent,v)}}}).filter(I=>{const W=I.target;return!I.button&&(!S||!Jo(W,`.${S}`,p))&&(!E||Jo(W,E,p))});f.call(U)}function k(){f==null||f.on(".drag",null)}return{update:b,destroy:k}}function Vu(e,t,n){const i=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const a of t.values())Qi(o,ii(a))>0&&i.push(a);return i}const Xu=250;function Yu(e,t,n,i){var r,l;let o=[],a=1/0;const s=Vu(e,n,t+Xu);for(const u of s){const c=[...((r=u.internals.handleBounds)==null?void 0:r.source)??[],...((l=u.internals.handleBounds)==null?void 0:l.target)??[]];for(const g of c){if(i.nodeId===g.nodeId&&i.type===g.type&&i.id===g.id)continue;const{x:f,y:m}=gn(u,g,g.position,!0),b=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(m-e.y,2));b>t||(b<a?(o=[{...g,x:f,y:m}],a=b):b===a&&o.push({...g,x:f,y:m}))}}if(!o.length)return null;if(o.length>1){const u=i.type==="source"?"target":"source";return o.find(c=>c.type===u)??o[0]}return o[0]}function Jr(e,t,n,i,o,a=!1){var u,c,g;const s=i.get(e);if(!s)return null;const r=o==="strict"?(u=s.internals.handleBounds)==null?void 0:u[t]:[...((c=s.internals.handleBounds)==null?void 0:c.source)??[],...((g=s.internals.handleBounds)==null?void 0:g.target)??[]],l=(n?r==null?void 0:r.find(f=>f.id===n):r==null?void 0:r[0])??null;return l&&a?{...l,...gn(s,l,l.position,!0)}:l}function Qr(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Lu(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const jr=()=>!0;function Bu(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:o,edgeUpdaterType:a,isTarget:s,domNode:r,nodeLookup:l,lib:u,autoPanOnConnect:c,flowId:g,panBy:f,cancelConnection:m,onConnectStart:b,onConnect:k,onConnectEnd:S,isValidConnection:E=jr,onReconnectEnd:p,updateConnection:w,getTransform:x,getFromHandle:P,autoPanSpeed:T}){const N=mu(e.target);let R=0,U;const{x:I,y:W}=bt(e),O=N==null?void 0:N.elementFromPoint(I,W),D=Qr(a,O),y=r==null?void 0:r.getBoundingClientRect();if(!y||!D)return;const z=Jr(o,D,i,l,t);if(!z)return;let v=bt(e,y),_=!1,C=null,M=!1,H=null;function L(){if(!c||!y)return;const[ye,G]=Xr(v,y,T);f({x:ye,y:G}),R=requestAnimationFrame(L)}const K={...z,nodeId:o,type:D,position:z.position},ne=l.get(o),B={inProgress:!0,isValid:null,from:gn(ne,K,oe.Left,!0),fromHandle:K,fromPosition:K.position,fromNode:ne,to:v,toHandle:null,toPosition:Vo[K.position],toNode:null};w(B);let te=B;b==null||b(e,{nodeId:o,handleId:i,handleType:D});function de(ye){if(!P()||!K){re(ye);return}const G=x();v=bt(ye,y),U=Yu(oi(v,G,!1,[1,1]),n,l,K),_||(L(),_=!0);const q=$r(ye,{handle:U,connectionMode:t,fromNodeId:o,fromHandleId:i,fromType:s?"target":"source",isValidConnection:E,doc:N,lib:u,flowId:g,nodeLookup:l});H=q.handleDomNode,C=q.connection,M=Lu(!!U,q.isValid);const ie={...te,isValid:M,to:U&&M?gu({x:U.x,y:U.y},G):v,toHandle:q.toHandle,toPosition:M&&q.toHandle?q.toHandle.position:Vo[K.position],toNode:q.toHandle?l.get(q.toHandle.nodeId):null};M&&U&&te.toHandle&&ie.toHandle&&te.toHandle.type===ie.toHandle.type&&te.toHandle.nodeId===ie.toHandle.nodeId&&te.toHandle.id===ie.toHandle.id&&te.to.x===ie.to.x&&te.to.y===ie.to.y||(w(ie),te=ie)}function re(ye){(U||H)&&C&&M&&(k==null||k(C));const{inProgress:G,...q}=te,ie={...q,toPosition:te.toHandle?te.toPosition:null};S==null||S(ye,ie),a&&(p==null||p(ye,ie)),m(),cancelAnimationFrame(R),_=!1,M=!1,C=null,H=null,N.removeEventListener("mousemove",de),N.removeEventListener("mouseup",re),N.removeEventListener("touchmove",de),N.removeEventListener("touchend",re)}N.addEventListener("mousemove",de),N.addEventListener("mouseup",re),N.addEventListener("touchmove",de),N.addEventListener("touchend",re)}function $r(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:a,doc:s,lib:r,flowId:l,isValidConnection:u=jr,nodeLookup:c}){const g=a==="target",f=t?s.querySelector(`.${r}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:m,y:b}=bt(e),k=s.elementFromPoint(m,b),S=k!=null&&k.classList.contains(`${r}-flow__handle`)?k:f,E={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const p=Qr(void 0,S),w=S.getAttribute("data-nodeid"),x=S.getAttribute("data-handleid"),P=S.classList.contains("connectable"),T=S.classList.contains("connectableend");if(!w||!p)return E;const N={source:g?w:i,sourceHandle:g?x:o,target:g?i:w,targetHandle:g?o:x};E.connection=N;const U=P&&T&&(n===Ht.Strict?g&&p==="source"||!g&&p==="target":w!==i||x!==o);E.isValid=U&&u(N),E.toHandle=Jr(w,p,x,c,n,!1)}return E}const Wu={onPointerDown:Bu,isValid:$r};function Ku({domNode:e,panZoom:t,getTransform:n,getViewScale:i}){const o=st(e);function a({translateExtent:r,width:l,height:u,zoomStep:c=10,pannable:g=!0,zoomable:f=!0,inversePan:m=!1}){const b=w=>{const x=n();if(w.sourceEvent.type!=="wheel"||!t)return;const P=-w.sourceEvent.deltaY*(w.sourceEvent.deltaMode===1?.05:w.sourceEvent.deltaMode?1:.002)*c,T=x[2]*Math.pow(2,P);t.scaleTo(T)};let k=[0,0];const S=w=>{(w.sourceEvent.type==="mousedown"||w.sourceEvent.type==="touchstart")&&(k=[w.sourceEvent.clientX??w.sourceEvent.touches[0].clientX,w.sourceEvent.clientY??w.sourceEvent.touches[0].clientY])},E=w=>{const x=n();if(w.sourceEvent.type!=="mousemove"&&w.sourceEvent.type!=="touchmove"||!t)return;const P=[w.sourceEvent.clientX??w.sourceEvent.touches[0].clientX,w.sourceEvent.clientY??w.sourceEvent.touches[0].clientY],T=[P[0]-k[0],P[1]-k[1]];k=P;const N=i()*Math.max(x[2],Math.log(x[2]))*(m?-1:1),R={x:x[0]-T[0]*N,y:x[1]-T[1]*N},U=[[0,0],[l,u]];t.setViewportConstrained({x:R.x,y:R.y,zoom:x[2]},U,r)},p=Ir().on("start",S).on("zoom",g?E:null).on("zoom.wheel",f?b:null);o.call(p,{})}function s(){o.on("zoom",null)}return{update:a,destroy:s,pointer:ut}}const Fu=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,ri=e=>({x:e.x,y:e.y,zoom:e.k}),vi=({x:e,y:t,zoom:n})=>ni.translate(e,t).scale(n),Xt=(e,t)=>e.target.closest(`.${t}`),es=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),pi=(e,t=0,n=()=>{})=>{const i=typeof t=="number"&&t>0;return i||n(),i?e.transition().duration(t).on("end",n):e},ts=e=>{const t=e.ctrlKey&&Fn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Zu({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:a,zoomOnPinch:s,onPanZoomStart:r,onPanZoom:l,onPanZoomEnd:u}){return c=>{if(Xt(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();const g=n.property("__zoom").k||1;if(c.ctrlKey&&s){const S=ut(c),E=ts(c),p=g*Math.pow(2,E);i.scaleTo(n,p,S,c);return}const f=c.deltaMode===1?20:1;let m=o===Ct.Vertical?0:c.deltaX*f,b=o===Ct.Horizontal?0:c.deltaY*f;!Fn()&&c.shiftKey&&o!==Ct.Vertical&&(m=c.deltaY*f,b=0),i.translateBy(n,-(m/g)*a,-(b/g)*a,{internal:!0});const k=ri(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,r==null||r(c,k)),e.isPanScrolling&&(l==null||l(c,k),e.panScrollTimeout=setTimeout(()=>{u==null||u(c,k),e.isPanScrolling=!1},150))}}function qu({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,o){if(!t&&i.type==="wheel"&&!i.ctrlKey||Xt(i,e))return null;i.preventDefault(),n.call(this,i,o)}}function Gu({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var a,s,r;if((a=i.sourceEvent)!=null&&a.internal)return;const o=ri(i.transform);e.mouseButton=((s=i.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((r=i.sourceEvent)==null?void 0:r.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,o))}}function Uu({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:o}){return a=>{var s,r;e.usedRightMouseButton=!!(n&&es(t,e.mouseButton??0)),(s=a.sourceEvent)!=null&&s.sync||i([a.transform.x,a.transform.y,a.transform.k]),o&&!((r=a.sourceEvent)!=null&&r.internal)&&(o==null||o(a.sourceEvent,ri(a.transform)))}}function Ju({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:a}){return s=>{var r;if(!((r=s.sourceEvent)!=null&&r.internal)&&(e.isZoomingOrPanning=!1,a&&es(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&a(s.sourceEvent),e.usedRightMouseButton=!1,i(!1),o&&Fu(e.prevViewport,s.transform))){const l=ri(s.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(s.sourceEvent,l)},n?150:0)}}}function Qu({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:a,userSelectionActive:s,noWheelClassName:r,noPanClassName:l,lib:u}){return c=>{var b;const g=e||t,f=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(Xt(c,`${u}-flow__node`)||Xt(c,`${u}-flow__edge`)))return!0;if(!i&&!g&&!o&&!a&&!n||s||Xt(c,r)&&c.type==="wheel"||Xt(c,l)&&(c.type!=="wheel"||o&&c.type==="wheel"&&!e)||!n&&c.ctrlKey&&c.type==="wheel")return!1;if(!n&&c.type==="touchstart"&&((b=c.touches)==null?void 0:b.length)>1)return c.preventDefault(),!1;if(!g&&!o&&!f&&c.type==="wheel"||!i&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(i)&&!i.includes(c.button)&&c.type==="mousedown")return!1;const m=Array.isArray(i)&&i.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&m}}function ju({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:i,translateExtent:o,viewport:a,onPanZoom:s,onPanZoomStart:r,onPanZoomEnd:l,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},g=e.getBoundingClientRect(),f=Ir().clickDistance(!hn(i)||i<0?0:i).scaleExtent([t,n]).translateExtent(o),m=st(e).call(f);w({x:a.x,y:a.y,zoom:Gt(a.zoom,t,n)},[[0,0],[g.width,g.height]],o);const b=m.on("wheel.zoom"),k=m.on("dblclick.zoom");f.wheelDelta(ts);function S(O,D){return m?new Promise(y=>{f==null||f.transform(pi(m,D==null?void 0:D.duration,()=>y(!0)),O)}):Promise.resolve(!1)}function E({noWheelClassName:O,noPanClassName:D,onPaneContextMenu:y,userSelectionActive:z,panOnScroll:v,panOnDrag:_,panOnScrollMode:C,panOnScrollSpeed:M,preventScrolling:H,zoomOnPinch:L,zoomOnScroll:K,zoomOnDoubleClick:ne,zoomActivationKeyPressed:Y,lib:B,onTransformChange:te}){z&&!c.isZoomingOrPanning&&p();const re=v&&!Y&&!z?Zu({zoomPanValues:c,noWheelClassName:O,d3Selection:m,d3Zoom:f,panOnScrollMode:C,panOnScrollSpeed:M,zoomOnPinch:L,onPanZoomStart:r,onPanZoom:s,onPanZoomEnd:l}):qu({noWheelClassName:O,preventScrolling:H,d3ZoomHandler:b});if(m.on("wheel.zoom",re,{passive:!1}),!z){const G=Gu({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:r});f.on("start",G);const q=Uu({zoomPanValues:c,panOnDrag:_,onPaneContextMenu:!!y,onPanZoom:s,onTransformChange:te});f.on("zoom",q);const ie=Ju({zoomPanValues:c,panOnDrag:_,panOnScroll:v,onPaneContextMenu:y,onPanZoomEnd:l,onDraggingChange:u});f.on("end",ie)}const ye=Qu({zoomActivationKeyPressed:Y,panOnDrag:_,zoomOnScroll:K,panOnScroll:v,zoomOnDoubleClick:ne,zoomOnPinch:L,userSelectionActive:z,noPanClassName:D,noWheelClassName:O,lib:B});f.filter(ye),ne?m.on("dblclick.zoom",k):m.on("dblclick.zoom",null)}function p(){f.on("zoom",null)}async function w(O,D,y){const z=vi(O),v=f==null?void 0:f.constrain()(z,D,y);return v&&await S(v),new Promise(_=>_(v))}async function x(O,D){const y=vi(O);return await S(y,D),new Promise(z=>z(y))}function P(O){if(m){const D=vi(O),y=m.property("__zoom");(y.k!==O.zoom||y.x!==O.x||y.y!==O.y)&&(f==null||f.transform(m,D,null,{sync:!0}))}}function T(){const O=m?Hr(m.node()):{x:0,y:0,k:1};return{x:O.x,y:O.y,zoom:O.k}}function N(O,D){return m?new Promise(y=>{f==null||f.scaleTo(pi(m,D==null?void 0:D.duration,()=>y(!0)),O)}):Promise.resolve(!1)}function R(O,D){return m?new Promise(y=>{f==null||f.scaleBy(pi(m,D==null?void 0:D.duration,()=>y(!0)),O)}):Promise.resolve(!1)}function U(O){f==null||f.scaleExtent(O)}function I(O){f==null||f.translateExtent(O)}function W(O){const D=!hn(O)||O<0?0:O;f==null||f.clickDistance(D)}return{update:E,destroy:p,setViewport:x,setViewportConstrained:w,getViewport:T,scaleTo:N,scaleBy:R,setScaleExtent:U,setTranslateExtent:I,syncViewport:P,setClickDistance:W}}var Qo;(function(e){e.Line="line",e.Handle="handle"})(Qo||(Qo={}));var $u=ze('<div role="button" tabindex="-1"><!></div>');function At(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(ne,"$connectable",n),a=()=>V(re,"$connectionRadius",n),s=()=>V(te,"$domNode",n),r=()=>V(de,"$nodeLookup",n),l=()=>V(B,"$connectionMode",n),u=()=>V(q,"$lib",n),c=()=>V(ve,"$autoPanOnConnect",n),g=()=>V(He,"$flowId",n),f=()=>V(G,"$isValidConnectionStore",n),m=()=>V(Me,"$onedgecreate",n),b=()=>V(Oe,"$onConnectAction",n),k=()=>V(me,"$onConnectStartAction",n),S=()=>V(se,"$onConnectEndAction",n),E=()=>V(ye,"$viewport",n),p=()=>V(tt,"$connection",n),w=()=>V(Re,"$edges",n),x=()=>V(_e,"$connectionLookup",n),P=Z(),T=Z(),N=Z(),R=Z(),U=Z(),I=Z(),W=Z(),O=Z();let D=h(t,"id",8,void 0),y=h(t,"type",8,"source"),z=h(t,"position",24,()=>oe.Top),v=h(t,"style",8,void 0),_=h(t,"isValidConnection",8,void 0),C=h(t,"onconnect",8,void 0),M=h(t,"ondisconnect",8,void 0),H=h(t,"isConnectable",8,void 0),L=h(t,"class",8,void 0);const K=Hn("svelteflow__node_id"),ne=Hn("svelteflow__node_connectable"),Y=Be(),{connectionMode:B,domNode:te,nodeLookup:de,connectionRadius:re,viewport:ye,isValidConnection:G,lib:q,addEdge:ie,onedgecreate:Me,panBy:Ne,cancelConnection:Se,updateConnection:Ce,autoPanOnConnect:ve,edges:Re,connectionLookup:_e,onconnect:Oe,onconnectstart:me,onconnectend:se,flowId:He,connection:tt}=Y;function pe(Ve){const Fe=Wr(Ve);(Fe&&Ve.button===0||!Fe)&&Wu.onPointerDown(Ve,{handleId:d(N),nodeId:K,isTarget:d(P),connectionRadius:a(),domNode:s(),nodeLookup:r(),connectionMode:l(),lib:u(),autoPanOnConnect:c(),flowId:g(),isValidConnection:_()??f(),updateConnection:Ce,cancelConnection:Se,panBy:Ne,onConnect:he=>{var it;const Ze=m()?m()(he):he;Ze&&(ie(Ze),(it=b())==null||it(he))},onConnectStart:(he,Ze)=>{var it;(it=k())==null||it(he,{nodeId:Ze.nodeId,handleId:Ze.handleId,handleType:Ze.handleType})},onConnectEnd:(he,Ze)=>{var it;(it=S())==null||it(he,Ze)},getTransform:()=>[E().x,E().y,E().zoom],getFromHandle:()=>p().fromHandle})}let We=Z(null),Te=Z();J(()=>A(y()),()=>{X(P,y()==="target")}),J(()=>(A(H()),o()),()=>{X(T,H()!==void 0?H():o())}),J(()=>A(D()),()=>{X(N,D()||null)}),J(()=>(A(C()),A(M()),w(),x(),A(y()),A(D())),()=>{(C()||M())&&(w(),X(Te,x().get(`${K}-${y()}-${D()||null}`)))}),J(()=>(d(We),d(Te),A(M()),A(C())),()=>{if(d(We)&&!lu(d(Te),d(We))){const Ve=d(Te)??new Map;Xo(d(We),Ve,M()),Xo(Ve,d(We),C())}X(We,d(Te)??new Map)}),J(()=>p(),()=>{X(R,!!p().fromHandle)}),J(()=>(p(),A(y()),d(N)),()=>{var Ve,Fe,he;X(U,((Ve=p().fromHandle)==null?void 0:Ve.nodeId)===K&&((Fe=p().fromHandle)==null?void 0:Fe.type)===y()&&((he=p().fromHandle)==null?void 0:he.id)===d(N))}),J(()=>(p(),A(y()),d(N)),()=>{var Ve,Fe,he;X(I,((Ve=p().toHandle)==null?void 0:Ve.nodeId)===K&&((Fe=p().toHandle)==null?void 0:Fe.type)===y()&&((he=p().toHandle)==null?void 0:he.id)===d(N))}),J(()=>(l(),p(),A(y()),d(N)),()=>{var Ve,Fe,he;X(W,l()===Ht.Strict?((Ve=p().fromHandle)==null?void 0:Ve.type)!==y():K!==((Fe=p().fromHandle)==null?void 0:Fe.nodeId)||d(N)!==((he=p().fromHandle)==null?void 0:he.id))}),J(()=>(d(I),p()),()=>{X(O,d(I)&&p().isValid)}),Ue(),ce();var we=$u();Q(we,"data-nodeid",K);const zt=ee(()=>kt(je(["svelte-flow__handle",`svelte-flow__handle-${z()}`,"nodrag","nopan",z(),L()])));var Rt=Pe(we);et(Rt,t,"default",{},null),Ee(we),be(()=>{Q(we,"data-handleid",d(N)),Q(we,"data-handlepos",z()),Q(we,"data-id",`${g()??""}-${K??""}-${(D()||null)??""}-${y()??""}`),ir(we,d(zt)),Q(we,"style",v()),Ae(we,"valid",d(O)),Ae(we,"connectingto",d(I)),Ae(we,"connectingfrom",d(U)),Ae(we,"source",!d(P)),Ae(we,"target",d(P)),Ae(we,"connectablestart",d(T)),Ae(we,"connectableend",d(T)),Ae(we,"connectable",d(T)),Ae(we,"connectionindicator",d(T)&&(!d(R)||d(W)))}),ke("mousedown",we,pe),ke("touchstart",we,pe),j(e,we),le(),i()}var ed=ze("<!> <!>",1);function Vi(e,t){const n=Ie(t,["children","$$slots","$$events","$$legacy"]);Ie(n,["data","targetPosition","sourcePosition"]),ae(t,!1);let i=h(t,"data",24,()=>({label:"Node"})),o=h(t,"targetPosition",8,void 0),a=h(t,"sourcePosition",8,void 0);ce();var s=ed(),r=De(s),l=ee(()=>o()??oe.Top);At(r,{type:"target",get position(){return d(l)}});var u=ge(r),c=ge(u),g=ee(()=>a()??oe.Bottom);At(c,{type:"source",get position(){return d(g)}}),be(()=>{var f;return Jt(u,` ${((f=i())==null?void 0:f.label)??""} `)}),j(e,s),le()}var td=ze(" <!>",1);function nd(e,t){const n=Ie(t,["children","$$slots","$$events","$$legacy"]);Ie(n,["data","sourcePosition"]),ae(t,!1);let i=h(t,"data",24,()=>({label:"Node"})),o=h(t,"sourcePosition",8,void 0);ce(),Yi();var a=td(),s=De(a),r=ge(s),l=ee(()=>o()??oe.Bottom);At(r,{type:"source",get position(){return d(l)}}),be(()=>{var u;return Jt(s,`${((u=i())==null?void 0:u.label)??""} `)}),j(e,a),le()}var id=ze(" <!>",1);function od(e,t){const n=Ie(t,["children","$$slots","$$events","$$legacy"]);Ie(n,["data","targetPosition"]),ae(t,!1);let i=h(t,"data",24,()=>({label:"Node"})),o=h(t,"targetPosition",8,void 0);ce(),Yi();var a=id(),s=De(a),r=ge(s),l=ee(()=>o()??oe.Top);At(r,{type:"target",get position(){return d(l)}}),be(()=>{var u;return Jt(s,`${((u=i())==null?void 0:u.label)??""} `)}),j(e,a),le()}function rd(e,t){const n=Ie(t,["children","$$slots","$$events","$$legacy"]);Ie(n,[])}function jo(e,t,n){if(!t)return;const i=n?t.querySelector(n):t;i&&i.appendChild(e)}function wi(e,{target:t,domNode:n}){return jo(e,n,t),{async update({target:i,domNode:o}){jo(e,o,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}var sd=ze("<div><!></div>");function ad(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(a,"$domNode",n),{domNode:a}=Be();ce();var s=sd(),r=Pe(s);et(r,t,"default",{},null),Ee(s),Qe(s,(l,u)=>wi==null?void 0:wi(l,u),()=>({target:".svelte-flow__edgelabel-renderer",domNode:o()})),j(e,s),le(),i()}function ns(){const{edgeLookup:e,selectionRect:t,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:o,unselectNodesAndEdges:a,elementsSelectable:s}=Be();return r=>{const l=F(e).get(r);if(!l){console.warn("012",pn.error012(r));return}(l.selectable||F(s)&&typeof l.selectable>"u")&&(t.set(null),n.set(null),l.selected?l.selected&&F(i)&&a({nodes:[],edges:[l]}):o([r]))}}var ld=ze('<div class="svelte-flow__edge-label" role="button" tabindex="-1"><!></div>');function cd(e,t){ae(t,!1);let n=h(t,"style",8,void 0),i=h(t,"x",8,void 0),o=h(t,"y",8,void 0);const a=ns(),s=Hn("svelteflow__edge_id");ce(),ad(e,{children:(r,l)=>{var u=ld(),c=Pe(u);et(c,t,"default",{},null),Ee(u),be(()=>{Q(u,"style","pointer-events: all;"+n()),Ke(u,"transform",`translate(-50%, -50%) translate(${i()??""}px,${o()??""}px)`)}),ke("keyup",u,()=>{}),ke("click",u,()=>{s&&a(s)}),j(r,u)},$$slots:{default:!0}}),le()}var ud=Ye('<path fill="none" class="svelte-flow__edge-interaction"></path>'),dd=Ye('<path fill="none"></path><!><!>',1);function si(e,t){ae(t,!1);let n=h(t,"id",8,void 0),i=h(t,"path",8),o=h(t,"label",8,void 0),a=h(t,"labelX",8,void 0),s=h(t,"labelY",8,void 0),r=h(t,"labelStyle",8,void 0),l=h(t,"markerStart",8,void 0),u=h(t,"markerEnd",8,void 0),c=h(t,"style",8,void 0),g=h(t,"interactionWidth",8,20),f=h(t,"class",8,void 0),m=g()===void 0?20:g();ce();var b=dd(),k=De(b);const S=ee(()=>kt(je(["svelte-flow__edge-path",f()])));var E=ge(k);{var p=P=>{var T=ud();Q(T,"stroke-opacity",0),Q(T,"stroke-width",m),be(()=>Q(T,"d",i())),j(P,T)};Xe(E,P=>{m&&P(p)})}var w=ge(E);{var x=P=>{cd(P,{get x(){return a()},get y(){return s()},get style(){return r()},children:(T,N)=>{Yi();var R=_s();be(()=>Jt(R,o())),j(T,R)},$$slots:{default:!0}})};Xe(w,P=>{o()&&P(x)})}be(()=>{Q(k,"id",n()),Q(k,"d",i()),Dt(k,d(S)),Q(k,"marker-start",l()),Q(k,"marker-end",u()),Q(k,"style",c())}),j(e,b),le()}function Xi(e,t){const n=Ie(t,["children","$$slots","$$events","$$legacy"]);Ie(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ae(t,!1);const i=Z(),o=Z(),a=Z();let s=h(t,"label",8,void 0),r=h(t,"labelStyle",8,void 0),l=h(t,"style",8,void 0),u=h(t,"markerStart",8,void 0),c=h(t,"markerEnd",8,void 0),g=h(t,"interactionWidth",8,void 0),f=h(t,"sourceX",8),m=h(t,"sourceY",8),b=h(t,"sourcePosition",8),k=h(t,"targetX",8),S=h(t,"targetY",8),E=h(t,"targetPosition",8);J(()=>(d(i),d(o),d(a),A(f()),A(m()),A(k()),A(S()),A(b()),A(E())),()=>{(p=>(X(i,p[0]),X(o,p[1]),X(a,p[2])))(Kr({sourceX:f(),sourceY:m(),targetX:k(),targetY:S(),sourcePosition:b(),targetPosition:E()}))}),Ue(),ce(),si(e,{get path(){return d(i)},get labelX(){return d(o)},get labelY(){return d(a)},get label(){return s()},get labelStyle(){return r()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return g()},get style(){return l()}}),le()}function fd(e,t){const n=Ie(t,["children","$$slots","$$events","$$legacy"]);Ie(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ae(t,!1);const i=Z(),o=Z(),a=Z();let s=h(t,"label",8,void 0),r=h(t,"labelStyle",8,void 0),l=h(t,"style",8,void 0),u=h(t,"markerStart",8,void 0),c=h(t,"markerEnd",8,void 0),g=h(t,"interactionWidth",8,void 0),f=h(t,"sourceX",8),m=h(t,"sourceY",8),b=h(t,"sourcePosition",8),k=h(t,"targetX",8),S=h(t,"targetY",8),E=h(t,"targetPosition",8);J(()=>(d(i),d(o),d(a),A(f()),A(m()),A(k()),A(S()),A(b()),A(E())),()=>{(p=>(X(i,p[0]),X(o,p[1]),X(a,p[2])))(Zn({sourceX:f(),sourceY:m(),targetX:k(),targetY:S(),sourcePosition:b(),targetPosition:E()}))}),Ue(),ce(),si(e,{get path(){return d(i)},get labelX(){return d(o)},get labelY(){return d(a)},get label(){return s()},get labelStyle(){return r()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return g()},get style(){return l()}}),le()}function hd(e,t){const n=Ie(t,["children","$$slots","$$events","$$legacy"]);Ie(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"]),ae(t,!1);const i=Z(),o=Z(),a=Z();let s=h(t,"label",8,void 0),r=h(t,"labelStyle",8,void 0),l=h(t,"style",8,void 0),u=h(t,"markerStart",8,void 0),c=h(t,"markerEnd",8,void 0),g=h(t,"interactionWidth",8,void 0),f=h(t,"sourceX",8),m=h(t,"sourceY",8),b=h(t,"targetX",8),k=h(t,"targetY",8);J(()=>(d(i),d(o),d(a),A(f()),A(m()),A(b()),A(k())),()=>{(S=>(X(i,S[0]),X(o,S[1]),X(a,S[2])))(Di({sourceX:f(),sourceY:m(),targetX:b(),targetY:k()}))}),Ue(),ce(),si(e,{get path(){return d(i)},get labelX(){return d(o)},get labelY(){return d(a)},get label(){return s()},get labelStyle(){return r()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return g()},get style(){return l()}}),le()}function gd(e,t){const n=Ie(t,["children","$$slots","$$events","$$legacy"]);Ie(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ae(t,!1);const i=Z(),o=Z(),a=Z();let s=h(t,"label",8,void 0),r=h(t,"labelStyle",8,void 0),l=h(t,"style",8,void 0),u=h(t,"markerStart",8,void 0),c=h(t,"markerEnd",8,void 0),g=h(t,"interactionWidth",8,void 0),f=h(t,"sourceX",8),m=h(t,"sourceY",8),b=h(t,"sourcePosition",8),k=h(t,"targetX",8),S=h(t,"targetY",8),E=h(t,"targetPosition",8);J(()=>(d(i),d(o),d(a),A(f()),A(m()),A(k()),A(S()),A(b()),A(E())),()=>{(p=>(X(i,p[0]),X(o,p[1]),X(a,p[2])))(Zn({sourceX:f(),sourceY:m(),targetX:k(),targetY:S(),sourcePosition:b(),targetPosition:E(),borderRadius:0}))}),Ue(),ce(),si(e,{get path(){return d(i)},get labelX(){return d(o)},get labelY(){return d(a)},get label(){return s()},get labelStyle(){return r()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return g()},get style(){return l()}}),le()}function md(e,t){const n=e.set,i=t.set,o=F(e),a=F(t);let r=o.length===0&&a.length>0?a:o;e.set(r);const l=u=>{const c=n(u);return r=c,i(r),c};e.set=t.set=l,e.update=t.update=u=>l(u(r))}function yd(e,t){const n=e.set,i=t.set;let o=F(t);e.set(o);const a=s=>{n(s),i(s),o=s};e.set=t.set=a,e.update=t.update=s=>a(s(o))}const vd=(e,t,n)=>{if(!n)return;const i=F(e),o=t.set,a=n.set;let s=n?F(n):{x:0,y:0,zoom:1};t.set(s),t.set=r=>(o(r),a(r),s=r,r),n.set=r=>(i==null||i.syncViewport(r),o(r),a(r),s=r,r),t.update=r=>{t.set(r(s))},n.update=r=>{n.set(r(s))}},pd=(e,t,n,i=[0,0],o=Bn)=>{const{subscribe:a,set:s,update:r}=$([]);let l=e,u={},c=!0;const g=k=>(Zr(k,t,n,{elevateNodesOnSelect:c,nodeOrigin:i,nodeExtent:o,defaults:u,checkEquality:!1}),l=k,s(l),l),f=k=>g(k(l)),m=k=>{u=k},b=k=>{c=k.elevateNodesOnSelect??c};return g(l),{subscribe:a,set:g,update:f,setDefaultOptions:m,setOptions:b}},wd=(e,t,n,i)=>{const{subscribe:o,set:a,update:s}=$([]);let r=e,l={};const u=f=>{const m=l?f.map(b=>({...l,...b})):f;Gr(t,n,m),r=m,a(r)},c=f=>u(f(r)),g=f=>{l=f};return u(r),{subscribe:o,set:u,update:c,setDefaultOptions:g}},is={input:nd,output:od,default:Vi,group:rd},os={straight:hd,smoothstep:fd,default:Xi,step:gd},xd=({nodes:e=[],edges:t=[],width:n,height:i,fitView:o,nodeOrigin:a,nodeExtent:s})=>{const r=new Map,l=new Map,u=new Map,c=new Map,g=a??[0,0],f=s??Bn;Zr(e,r,l,{nodeExtent:f,nodeOrigin:g,elevateNodesOnSelect:!1,checkEquality:!1}),Gr(u,c,t);let m={x:0,y:0,zoom:1};if(o&&n&&i){const b=xn(r,{filter:k=>!!((k.width||k.initialWidth)&&(k.height||k.initialHeight))});m=Lr(b,n,i,.5,2,.1)}return{flowId:$(null),nodes:pd(e,r,l,g,f),nodeLookup:ct(r),parentLookup:ct(l),edgeLookup:ct(c),visibleNodes:ct([]),edges:wd(t,u,c),visibleEdges:ct([]),connectionLookup:ct(u),height:$(500),width:$(500),minZoom:$(.5),maxZoom:$(2),nodeOrigin:$(g),nodeDragThreshold:$(1),nodeExtent:$(f),translateExtent:$(Bn),autoPanOnNodeDrag:$(!0),autoPanOnConnect:$(!0),fitViewOnInit:$(!1),fitViewOnInitDone:$(!1),fitViewOptions:$(void 0),panZoom:$(null),snapGrid:$(null),dragging:$(!1),selectionRect:$(null),selectionKeyPressed:$(!1),multiselectionKeyPressed:$(!1),deleteKeyPressed:$(!1),panActivationKeyPressed:$(!1),zoomActivationKeyPressed:$(!1),selectionRectMode:$(null),selectionMode:$(Wn.Partial),nodeTypes:$(is),edgeTypes:$(os),viewport:$(m),connectionMode:$(Ht.Strict),domNode:$(null),connection:ct(Ai),connectionLineType:$(Wt.Bezier),connectionRadius:$(20),isValidConnection:$(()=>!0),nodesDraggable:$(!0),nodesConnectable:$(!0),elementsSelectable:$(!0),selectNodesOnDrag:$(!0),markers:ct([]),defaultMarkerColor:$("#b1b1b7"),lib:ct("svelte"),onlyRenderVisibleElements:$(!1),onerror:$(hu),ondelete:$(void 0),onedgecreate:$(void 0),onconnect:$(void 0),onconnectstart:$(void 0),onconnectend:$(void 0),onbeforedelete:$(void 0),nodesInitialized:$(!1),edgesInitialized:$(!1),viewportInitialized:$(!1),initialized:ct(!1)}};function bd(e){const t=Yt([e.edges,e.nodes,e.nodeLookup,e.onlyRenderVisibleElements,e.viewport,e.width,e.height],([n,,i,o,a,s,r])=>o&&s&&r?n.filter(u=>{const c=i.get(u.source),g=i.get(u.target);return c&&g&&xu({sourceNode:c,targetNode:g,width:s,height:r,transform:[a.x,a.y,a.zoom]})}):n);return Yt([t,e.nodes,e.nodeLookup,e.connectionMode,e.onerror],([n,,i,o,a])=>n.reduce((r,l)=>{const u=i.get(l.source),c=i.get(l.target);if(!u||!c)return r;const g=Mu({id:l.id,sourceNode:u,targetNode:c,sourceHandle:l.sourceHandle||null,targetHandle:l.targetHandle||null,connectionMode:o,onError:a});return g&&r.push({...l,zIndex:wu({selected:l.selected,zIndex:l.zIndex,sourceNode:u,targetNode:c,elevateOnSelect:!1}),...g}),r},[]))}function _d(e){return Yt([e.nodeLookup,e.onlyRenderVisibleElements,e.width,e.height,e.viewport,e.nodes],([t,n,i,o,a])=>{const s=[a.x,a.y,a.zoom];return n?Rr(t,{x:0,y:0,width:i,height:o},s,!0):Array.from(t.values())})}const io=Symbol();function kd({nodes:e,edges:t,width:n,height:i,fitView:o,nodeOrigin:a,nodeExtent:s}){const r=xd({nodes:e,edges:t,width:n,height:i,fitView:o,nodeOrigin:a,nodeExtent:s});function l(v){r.nodeTypes.set({...is,...v})}function u(v){r.edgeTypes.set({...os,...v})}function c(v){const _=F(r.edges);r.edges.set(ku(v,_))}const g=(v,_=!1)=>{var M;const C=F(r.nodeLookup);for(const[H,L]of v){const K=(M=C.get(H))==null?void 0:M.internals.userNode;K&&(K.position=L.position,K.dragging=_)}r.nodes.update(H=>H)};function f(v){var L,K,ne;const _=F(r.nodeLookup),C=F(r.parentLookup),{changes:M,updatedInternals:H}=Hu(v,_,F(r.parentLookup),F(r.domNode),F(r.nodeOrigin));if(H){if(Nu(_,C,{nodeOrigin:a,nodeExtent:s}),!F(r.fitViewOnInitDone)&&F(r.fitViewOnInit)){const Y=F(r.fitViewOptions),B=b({...Y,nodes:Y==null?void 0:Y.nodes});r.fitViewOnInitDone.set(B)}for(const Y of M){const B=(L=_.get(Y.id))==null?void 0:L.internals.userNode;if(B)switch(Y.type){case"dimensions":{const te={...B.measured,...Y.dimensions};Y.setAttributes&&(B.width=((K=Y.dimensions)==null?void 0:K.width)??B.width,B.height=((ne=Y.dimensions)==null?void 0:ne.height)??B.height),B.measured=te;break}case"position":B.position=Y.position??B.position;break}}r.nodes.update(Y=>Y),F(r.nodesInitialized)||r.nodesInitialized.set(!0)}}function m(v){const _=F(r.panZoom),C=F(r.domNode);if(!_||!C)return Promise.resolve(!1);const{width:M,height:H}=$i(C),L=Yo(F(r.nodeLookup),v);return Lo({nodes:L,width:M,height:H,minZoom:F(r.minZoom),maxZoom:F(r.maxZoom),panZoom:_},v)}function b(v){const _=F(r.panZoom);if(!_)return!1;const C=Yo(F(r.nodeLookup),v);return Lo({nodes:C,width:F(r.width),height:F(r.height),minZoom:F(r.minZoom),maxZoom:F(r.maxZoom),panZoom:_},v),C.size>0}function k(v,_){const C=F(r.panZoom);return C?C.scaleBy(v,_):Promise.resolve(!1)}function S(v){return k(1.2,v)}function E(v){return k(1/1.2,v)}function p(v){const _=F(r.panZoom);_&&(_.setScaleExtent([v,F(r.maxZoom)]),r.minZoom.set(v))}function w(v){const _=F(r.panZoom);_&&(_.setScaleExtent([F(r.minZoom),v]),r.maxZoom.set(v))}function x(v){const _=F(r.panZoom);_&&(_.setTranslateExtent(v),r.translateExtent.set(v))}function P(v){let _=!1;return v.forEach(C=>{C.selected&&(C.selected=!1,_=!0)}),_}function T(v){var _;(_=F(r.panZoom))==null||_.setClickDistance(v)}function N(v){P((v==null?void 0:v.nodes)||F(r.nodes))&&r.nodes.set(F(r.nodes)),P((v==null?void 0:v.edges)||F(r.edges))&&r.edges.set(F(r.edges))}r.deleteKeyPressed.subscribe(async v=>{var _;if(v){const C=F(r.nodes),M=F(r.edges),H=C.filter(Y=>Y.selected),L=M.filter(Y=>Y.selected),{nodes:K,edges:ne}=await fu({nodesToRemove:H,edgesToRemove:L,nodes:C,edges:M,onBeforeDelete:F(r.onbeforedelete)});(K.length||ne.length)&&(r.nodes.update(Y=>Y.filter(B=>!K.some(te=>te.id===B.id))),r.edges.update(Y=>Y.filter(B=>!ne.some(te=>te.id===B.id))),(_=F(r.ondelete))==null||_({nodes:K,edges:ne}))}});function R(v){const _=F(r.multiselectionKeyPressed);r.nodes.update(C=>C.map(M=>{const H=v.includes(M.id),L=_&&M.selected||H;return M.selected=L,M})),_||r.edges.update(C=>C.map(M=>(M.selected=!1,M)))}function U(v){const _=F(r.multiselectionKeyPressed);r.edges.update(C=>C.map(M=>{const H=v.includes(M.id),L=_&&M.selected||H;return M.selected=L,M})),_||r.nodes.update(C=>C.map(M=>(M.selected=!1,M)))}function I(v){var C;const _=(C=F(r.nodes))==null?void 0:C.find(M=>M.id===v);if(!_){console.warn("012",pn.error012(v));return}r.selectionRect.set(null),r.selectionRectMode.set(null),_.selected?_.selected&&F(r.multiselectionKeyPressed)&&N({nodes:[_],edges:[]}):R([v])}function W(v){const _=F(r.viewport);return Iu({delta:v,panZoom:F(r.panZoom),transform:[_.x,_.y,_.zoom],translateExtent:F(r.translateExtent),width:F(r.width),height:F(r.height)})}const O=$(Ai),D=v=>{O.set({...v})};function y(){O.set(Ai)}function z(){r.fitViewOnInitDone.set(!1),r.selectionRect.set(null),r.selectionRectMode.set(null),r.snapGrid.set(null),r.isValidConnection.set(()=>!0),N(),y()}return{...r,visibleEdges:bd(r),visibleNodes:_d(r),connection:Yt([O,r.viewport],([v,_])=>v.inProgress?{...v,to:oi(v.to,[_.x,_.y,_.zoom])}:{...v}),markers:Yt([r.edges,r.defaultMarkerColor,r.flowId],([v,_,C])=>Pu(v,{defaultColor:_,id:C})),initialized:(()=>{let v=!1;const _=F(r.nodes).length,C=F(r.edges).length;return Yt([r.nodesInitialized,r.edgesInitialized,r.viewportInitialized],([M,H,L])=>v||(_===0?v=L:C===0?v=L&&M:v=L&&M&&H,v))})(),syncNodeStores:v=>md(r.nodes,v),syncEdgeStores:v=>yd(r.edges,v),syncViewport:v=>vd(r.panZoom,r.viewport,v),setNodeTypes:l,setEdgeTypes:u,addEdge:c,updateNodePositions:g,updateNodeInternals:f,zoomIn:S,zoomOut:E,fitView:v=>m(v),setMinZoom:p,setMaxZoom:w,setTranslateExtent:x,setPaneClickDistance:T,unselectNodesAndEdges:N,addSelectedNodes:R,addSelectedEdges:U,handleNodeSelection:I,panBy:W,updateConnection:D,cancelConnection:y,reset:z}}function Be(){const e=Hn(io);if(!e)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}function Ed({nodes:e,edges:t,width:n,height:i,fitView:o,nodeOrigin:a,nodeExtent:s}){const r=kd({nodes:e,edges:t,width:n,height:i,fitView:o,nodeOrigin:a,nodeExtent:s});return In(io,{getStore:()=>r}),r}function xi(e,t){const{panZoom:n,minZoom:i,maxZoom:o,initialViewport:a,viewport:s,dragging:r,translateExtent:l,paneClickDistance:u}=t,c=ju({domNode:e,minZoom:i,maxZoom:o,translateExtent:l,viewport:a,paneClickDistance:u,onDraggingChange:r.set}),g=c.getViewport();return s.set(g),n.set(c),c.update(t),{update(f){c.update(f)}}}var Sd=ze('<div class="svelte-flow__zoom svelte-4xkw84"><!></div>');function Cd(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(C,"$panActivationKeyPressed",n),a=()=>V(D,"$minZoom",n),s=()=>V(y,"$maxZoom",n),r=()=>V(M,"$zoomActivationKeyPressed",n),l=()=>V(O,"$selectionRect",n),u=()=>V(v,"$translateExtent",n),c=()=>V(_,"$lib",n),g=Z(),f=Z(),m=Z();let b=h(t,"initialViewport",8,void 0),k=h(t,"onMoveStart",8,void 0),S=h(t,"onMove",8,void 0),E=h(t,"onMoveEnd",8,void 0),p=h(t,"panOnScrollMode",8),w=h(t,"preventScrolling",8),x=h(t,"zoomOnScroll",8),P=h(t,"zoomOnDoubleClick",8),T=h(t,"zoomOnPinch",8),N=h(t,"panOnDrag",8),R=h(t,"panOnScroll",8),U=h(t,"paneClickDistance",8);const{viewport:I,panZoom:W,selectionRect:O,minZoom:D,maxZoom:y,dragging:z,translateExtent:v,lib:_,panActivationKeyPressed:C,zoomActivationKeyPressed:M,viewportInitialized:H}=Be(),L=Y=>I.set({x:Y[0],y:Y[1],zoom:Y[2]});Un(()=>{an(H,!0)}),J(()=>A(b()),()=>{X(g,b()||{x:0,y:0,zoom:1})}),J(()=>(o(),A(N())),()=>{X(f,o()||N())}),J(()=>(o(),A(R())),()=>{X(m,o()||R())}),Ue(),ce();var K=Sd(),ne=Pe(K);et(ne,t,"default",{},null),Ee(K),Qe(K,(Y,B)=>xi==null?void 0:xi(Y,B),()=>({viewport:I,minZoom:a(),maxZoom:s(),initialViewport:d(g),dragging:z,panZoom:W,onPanZoomStart:k(),onPanZoom:S(),onPanZoomEnd:E(),zoomOnScroll:x(),zoomOnDoubleClick:P(),zoomOnPinch:T(),panOnScroll:d(m),panOnDrag:d(f),panOnScrollSpeed:.5,panOnScrollMode:p()||Ct.Free,zoomActivationKeyPressed:r(),preventScrolling:typeof w()=="boolean"?w():!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!l(),translateExtent:u(),lib:c(),paneClickDistance:U(),onTransformChange:L})),j(e,K),le(),i()}function $o(e,t){return n=>{n.target===t&&(e==null||e(n))}}function er(e){return t=>{const n=e.includes(t.id);return t.selected!==n&&(t.selected=n),t}}var Md=ze('<div class="svelte-flow__pane svelte-1esy7hx"><!></div>');function Pd(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(y,"$panActivationKeyPressed",n),a=()=>V(O,"$selectionKeyPressed",n),s=()=>V(I,"$selectionRect",n),r=()=>V(U,"$elementsSelectable",n),l=()=>V(W,"$selectionRectMode",n),u=()=>V(T,"$edges",n),c=()=>V(P,"$nodeLookup",n),g=()=>V(N,"$viewport",n),f=()=>V(D,"$selectionMode",n),m=()=>V(R,"$dragging",n),b=Z(),k=Z(),S=Z();let E=h(t,"panOnDrag",8,void 0),p=h(t,"selectionOnDrag",8,void 0);const w=Jn(),{nodes:x,nodeLookup:P,edges:T,viewport:N,dragging:R,elementsSelectable:U,selectionRect:I,selectionRectMode:W,selectionKeyPressed:O,selectionMode:D,panActivationKeyPressed:y,unselectNodesAndEdges:z}=Be();let v=Z(),_=null,C=[],M=!1;function H(G){if(M){M=!1;return}w("paneclick",{event:G}),z(),W.set(null)}function L(G){var Me,Ne;if(_=d(v).getBoundingClientRect(),!U||!d(k)||G.button!==0||G.target!==d(v)||!_)return;(Ne=(Me=G.target)==null?void 0:Me.setPointerCapture)==null||Ne.call(Me,G.pointerId);const{x:q,y:ie}=bt(G,_);z(),I.set({width:0,height:0,startX:q,startY:ie,x:q,y:ie})}function K(G){if(!d(k)||!_||!s())return;M=!0;const q=bt(G,_),ie=s().startX??0,Me=s().startY??0,Ne={...s(),x:q.x<ie?q.x:ie,y:q.y<Me?q.y:Me,width:Math.abs(q.x-ie),height:Math.abs(q.y-Me)},Se=C.map(_e=>_e.id),Ce=Oi(C,u()).map(_e=>_e.id);C=Rr(c(),Ne,[g().x,g().y,g().zoom],f()===Wn.Partial,!0);const ve=Oi(C,u()).map(_e=>_e.id),Re=C.map(_e=>_e.id);(Se.length!==Re.length||Re.some(_e=>!Se.includes(_e)))&&x.update(_e=>_e.map(er(Re))),(Ce.length!==ve.length||ve.some(_e=>!Ce.includes(_e)))&&T.update(_e=>_e.map(er(ve))),W.set("user"),I.set(Ne)}function ne(G){var q,ie;G.button===0&&((ie=(q=G.target)==null?void 0:q.releasePointerCapture)==null||ie.call(q,G.pointerId),!d(k)&&l()==="user"&&G.target===d(v)&&(H==null||H(G)),I.set(null),C.length>0&&an(W,"nodes"),a()&&(M=!1))}const Y=G=>{var q;if(Array.isArray(d(b))&&((q=d(b))!=null&&q.includes(2))){G.preventDefault();return}w("panecontextmenu",{event:G})};J(()=>(o(),A(E())),()=>{X(b,o()||E())}),J(()=>(a(),s(),A(p()),d(b)),()=>{X(k,a()||s()||p()&&d(b)!==!0)}),J(()=>(r(),d(k),l()),()=>{X(S,r()&&(d(k)||l()==="user"))}),Ue(),ce();var B=Md(),te=po(()=>d(S)?void 0:$o(H,d(v))),de=po(()=>$o(Y,d(v)));const re=ee(()=>E()===!0||Array.isArray(E())&&E().includes(0));be(()=>Ae(B,"draggable",d(re)));var ye=Pe(B);et(ye,t,"default",{},null),Ee(B),Bi(B,G=>X(v,G),()=>d(v)),be(()=>{Ae(B,"dragging",m()),Ae(B,"selection",d(k))}),ke("click",B,function(...G){var q;(q=d(te))==null||q.apply(this,G)}),ke("pointerdown",B,function(...G){var q;(q=d(S)?L:void 0)==null||q.apply(this,G)}),ke("pointermove",B,function(...G){var q;(q=d(S)?K:void 0)==null||q.apply(this,G)}),ke("pointerup",B,function(...G){var q;(q=d(S)?ne:void 0)==null||q.apply(this,G)}),ke("contextmenu",B,function(...G){var q;(q=d(de))==null||q.apply(this,G)}),j(e,B),le(),i()}var zd=ze('<div class="svelte-flow__viewport xyflow__viewport svelte-1floaup"><!></div>');function Nd(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(a,"$viewport",n),{viewport:a}=Be();ce();var s=zd(),r=Pe(s);et(r,t,"default",{},null),Ee(s),be(()=>Q(s,"style",`transform: translate(${o().x??""}px, ${o().y??""}px) scale(${o().zoom??""})`)),j(e,s),le(),i()}function Kt(e,t){const{store:n,onDrag:i,onDragStart:o,onDragStop:a,onNodeMouseDown:s}=t,r=Ru({onDrag:i,onDragStart:o,onDragStop:a,onNodeMouseDown:s,getStoreItems:()=>{const u=F(n.snapGrid),c=F(n.viewport);return{nodes:F(n.nodes),nodeLookup:F(n.nodeLookup),edges:F(n.edges),nodeExtent:F(n.nodeExtent),snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:F(n.nodeOrigin),multiSelectionActive:F(n.multiselectionKeyPressed),domNode:F(n.domNode),transform:[c.x,c.y,c.zoom],autoPanOnNodeDrag:F(n.autoPanOnNodeDrag),nodesDraggable:F(n.nodesDraggable),selectNodesOnDrag:F(n.selectNodesOnDrag),nodeDragThreshold:F(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function l(u,c){if(c.disabled){r.destroy();return}r.update({domNode:u,noDragClassName:c.noDragClass,handleSelector:c.handleSelector,nodeId:c.nodeId,isSelectable:c.isSelectable,nodeClickDistance:c.nodeClickDistance})}return l(e,t),{update(u){l(e,u)},destroy(){r.destroy()}}}function Td({width:e,height:t,initialWidth:n,initialHeight:i,measuredWidth:o,measuredHeight:a}){if(o===void 0&&a===void 0){const s=e??n,r=t??i;return{width:s?`width:${s}px;`:"",height:r?`height:${r}px;`:""}}return{width:e?`width:${e}px;`:"",height:t?`height:${t}px;`:""}}var Ad=ze("<div><!></div>");function Od(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(B,"$nodeTypes",n),a=()=>V(Me,"$connectableStore",n),s=Z(void 0,!0),r=Z(void 0,!0),l=Z(void 0,!0),u=Z(void 0,!0);let c=h(t,"node",9),g=h(t,"id",9),f=h(t,"data",25,()=>({})),m=h(t,"selected",9,!1),b=h(t,"draggable",9,void 0),k=h(t,"selectable",9,void 0),S=h(t,"connectable",9,!0),E=h(t,"deletable",9,!0),p=h(t,"hidden",9,!1),w=h(t,"dragging",9,!1),x=h(t,"resizeObserver",9,null),P=h(t,"style",9,void 0),T=h(t,"type",9,"default"),N=h(t,"isParent",9,!1),R=h(t,"positionX",9),U=h(t,"positionY",9),I=h(t,"sourcePosition",9,void 0),W=h(t,"targetPosition",9,void 0),O=h(t,"zIndex",9),D=h(t,"measuredWidth",9,void 0),y=h(t,"measuredHeight",9,void 0),z=h(t,"initialWidth",9,void 0),v=h(t,"initialHeight",9,void 0),_=h(t,"width",9,void 0),C=h(t,"height",9,void 0),M=h(t,"dragHandle",9,void 0),H=h(t,"initialized",9,!1),L=h(t,"parentId",9,void 0),K=h(t,"nodeClickDistance",9,void 0),ne=h(t,"class",9,"");const Y=Be(),{nodeTypes:B,nodeDragThreshold:te,selectNodesOnDrag:de,handleNodeSelection:re,updateNodeInternals:ye}=Y;let G=Z(void 0,!0),q=Z(null,!0);const ie=Jn(),Me=$(S());let Ne=Z(void 0,!0),Se=Z(void 0,!0),Ce=Z(void 0,!0);In("svelteflow__node_id",g()),In("svelteflow__node_connectable",Me),or(()=>{var me;d(q)&&((me=x())==null||me.unobserve(d(q)))});function ve(me){k()&&(!F(de)||!b()||F(te)>0)&&re(g()),ie("nodeclick",{node:c().internals.userNode,event:me})}J(()=>A(T()),()=>{X(s,T()||"default")}),J(()=>(o(),d(s)),()=>{X(r,!!o()[d(s)])}),J(()=>(o(),d(s),Vi),()=>{X(l,o()[d(s)]||Vi)}),J(()=>(d(r),A(T())),()=>{d(r)||console.warn("003",pn.error003(T()))}),J(()=>(A(_()),A(C()),A(z()),A(v()),A(D()),A(y())),()=>{X(u,Td({width:_(),height:C(),initialWidth:z(),initialHeight:v(),measuredWidth:D(),measuredHeight:y()}))}),J(()=>A(S()),()=>{Me.set(!!S())}),J(()=>(d(Ne),d(s),d(Se),A(I()),d(Ce),A(W()),A(g()),d(G)),()=>{(d(Ne)&&d(s)!==d(Ne)||d(Se)&&I()!==d(Se)||d(Ce)&&W()!==d(Ce))&&requestAnimationFrame(()=>ye(new Map([[g(),{id:g(),nodeElement:d(G),force:!0}]]))),X(Ne,d(s)),X(Se,I()),X(Ce,W())}),J(()=>(A(x()),d(G),d(q),A(H())),()=>{x()&&(d(G)!==d(q)||!H())&&(d(q)&&x().unobserve(d(q)),d(G)&&x().observe(d(G)),X(q,d(G)))}),Ue(),ce(!0);var Re=ft(),_e=De(Re);{var Oe=me=>{var se=Ad();const He=ee(()=>kt(je(["svelte-flow__node",`svelte-flow__node-${d(s)}`,ne()])));var tt=Pe(se);rr(tt,()=>d(l),(pe,We)=>{We(pe,{get data(){return f()},get id(){return g()},get selected(){return m()},get selectable(){return k()},get deletable(){return E()},get sourcePosition(){return I()},get targetPosition(){return W()},get zIndex(){return O()},get dragging(){return w()},get draggable(){return b()},get dragHandle(){return M()},get parentId(){return L()},get type(){return d(s)},get isConnectable(){return a()},get positionAbsoluteX(){return R()},get positionAbsoluteY(){return U()},get width(){return _()},get height(){return C()}})}),Ee(se),Qe(se,(pe,We)=>Kt==null?void 0:Kt(pe,We),()=>({nodeId:g(),isSelectable:k(),disabled:!1,handleSelector:M(),noDragClass:"nodrag",nodeClickDistance:K(),onNodeMouseDown:re,onDrag:(pe,We,Te,we)=>{ie("nodedrag",{event:pe,targetNode:Te,nodes:we})},onDragStart:(pe,We,Te,we)=>{ie("nodedragstart",{event:pe,targetNode:Te,nodes:we})},onDragStop:(pe,We,Te,we)=>{ie("nodedragstop",{event:pe,targetNode:Te,nodes:we})},store:Y})),Bi(se,pe=>X(G,pe),()=>d(G)),wt(()=>ke("click",se,ve)),wt(()=>ke("mouseenter",se,pe=>ie("nodemouseenter",{node:c(),event:pe}))),wt(()=>ke("mouseleave",se,pe=>ie("nodemouseleave",{node:c(),event:pe}))),wt(()=>ke("mousemove",se,pe=>ie("nodemousemove",{node:c(),event:pe}))),wt(()=>ke("contextmenu",se,pe=>ie("nodecontextmenu",{node:c(),event:pe}))),be(()=>{Q(se,"data-id",g()),ir(se,d(He)),Q(se,"style",`${P()??""??""};${d(u).width??""}${d(u).height??""}`),Ae(se,"dragging",w()),Ae(se,"selected",m()),Ae(se,"draggable",b()),Ae(se,"connectable",S()),Ae(se,"selectable",k()),Ae(se,"nopan",b()),Ae(se,"parent",N()),Ke(se,"z-index",O()),Ke(se,"transform",`translate(${R()??""}px, ${U()??""}px)`),Ke(se,"visibility",H()?"visible":"hidden")}),j(me,se)};Xe(_e,me=>{p()||me(Oe)})}j(e,Re),le(),i()}var Hd=ze('<div class="svelte-flow__nodes svelte-tf4uy4"></div>');function Id(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(c,"$visibleNodes",n),a=()=>V(g,"$nodesDraggable",n),s=()=>V(m,"$elementsSelectable",n),r=()=>V(f,"$nodesConnectable",n),l=()=>V(k,"$parentLookup",n);let u=h(t,"nodeClickDistance",8,0);const{visibleNodes:c,nodesDraggable:g,nodesConnectable:f,elementsSelectable:m,updateNodeInternals:b,parentLookup:k}=Be(),S=typeof ResizeObserver>"u"?null:new ResizeObserver(p=>{const w=new Map;p.forEach(x=>{const P=x.target.getAttribute("data-id");w.set(P,{id:P,nodeElement:x.target,force:!0})}),b(w)});or(()=>{S==null||S.disconnect()}),ce();var E=Hd();Qn(E,5,o,p=>p.id,(p,w)=>{var x=ee(()=>!!d(w).selected),P=ee(()=>!!d(w).hidden),T=ee(()=>!!(d(w).draggable||a()&&typeof d(w).draggable>"u")),N=ee(()=>!!(d(w).selectable||s()&&typeof d(w).selectable>"u")),R=ee(()=>!!(d(w).connectable||r()&&typeof d(w).connectable>"u")),U=ee(()=>d(w).deletable??!0),I=ee(()=>l().has(d(w).id)),W=ee(()=>d(w).type??"default"),O=ee(()=>d(w).internals.z??0),D=ee(()=>Br(d(w)));Od(p,{get node(){return d(w)},get id(){return d(w).id},get data(){return d(w).data},get selected(){return d(x)},get hidden(){return d(P)},get draggable(){return d(T)},get selectable(){return d(N)},get connectable(){return d(R)},get deletable(){return d(U)},get positionX(){return d(w).internals.positionAbsolute.x},get positionY(){return d(w).internals.positionAbsolute.y},get isParent(){return d(I)},get style(){return d(w).style},get class(){return d(w).class},get type(){return d(W)},get sourcePosition(){return d(w).sourcePosition},get targetPosition(){return d(w).targetPosition},get dragging(){return d(w).dragging},get zIndex(){return d(O)},get dragHandle(){return d(w).dragHandle},get initialized(){return d(D)},get width(){return d(w).width},get height(){return d(w).height},get initialWidth(){return d(w).initialWidth},get initialHeight(){return d(w).initialHeight},get measuredWidth(){return d(w).measured.width},get measuredHeight(){return d(w).measured.height},get parentId(){return d(w).parentId},resizeObserver:S,get nodeClickDistance(){return u()},$$events:{nodeclick(y){fe.call(this,t,y)},nodemouseenter(y){fe.call(this,t,y)},nodemousemove(y){fe.call(this,t,y)},nodemouseleave(y){fe.call(this,t,y)},nodedrag(y){fe.call(this,t,y)},nodedragstart(y){fe.call(this,t,y)},nodedragstop(y){fe.call(this,t,y)},nodecontextmenu(y){fe.call(this,t,y)}}})}),Ee(E),j(e,E),le(),i()}var Dd=Ye('<svg><g role="img"><!></g></svg>');function Rd(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(B,"$edgeTypes",n),a=()=>V(te,"$flowId",n),s=()=>V(de,"$elementsSelectable",n),r=()=>V(Y,"$edgeLookup",n),l=Z(void 0,!0),u=Z(void 0,!0),c=Z(void 0,!0),g=Z(void 0,!0),f=Z(void 0,!0);let m=h(t,"id",9),b=h(t,"type",9,"default"),k=h(t,"source",9,""),S=h(t,"target",9,""),E=h(t,"data",25,()=>({})),p=h(t,"style",9,void 0),w=h(t,"zIndex",9,void 0),x=h(t,"animated",9,!1),P=h(t,"selected",9,!1),T=h(t,"selectable",9,void 0),N=h(t,"deletable",9,void 0),R=h(t,"hidden",9,!1),U=h(t,"label",9,void 0),I=h(t,"labelStyle",9,void 0),W=h(t,"markerStart",9,void 0),O=h(t,"markerEnd",9,void 0),D=h(t,"sourceHandle",9,void 0),y=h(t,"targetHandle",9,void 0),z=h(t,"sourceX",9),v=h(t,"sourceY",9),_=h(t,"targetX",9),C=h(t,"targetY",9),M=h(t,"sourcePosition",9),H=h(t,"targetPosition",9),L=h(t,"ariaLabel",9,void 0),K=h(t,"interactionWidth",9,void 0),ne=h(t,"class",9,"");In("svelteflow__edge_id",m());const{edgeLookup:Y,edgeTypes:B,flowId:te,elementsSelectable:de}=Be(),re=Jn(),ye=ns();function G(Se){const Ce=r().get(m());Ce&&(ye(m()),re("edgeclick",{event:Se,edge:Ce}))}function q(Se,Ce){const ve=r().get(m());ve&&re(Ce,{event:Se,edge:ve})}J(()=>A(b()),()=>{X(l,b()||"default")}),J(()=>(o(),d(l),Xi),()=>{X(u,o()[d(l)]||Xi)}),J(()=>(A(W()),a()),()=>{X(c,W()?`url('#${Ri(W(),a())}')`:void 0)}),J(()=>(A(O()),a()),()=>{X(g,O()?`url('#${Ri(O(),a())}')`:void 0)}),J(()=>(A(T()),s()),()=>{X(f,T()??s())}),Ue(),ce(!0);var ie=ft(),Me=De(ie);{var Ne=Se=>{var Ce=Dd(),ve=Pe(Ce);const Re=ee(()=>kt(je(["svelte-flow__edge",ne()])));var _e=Pe(ve),Oe=ee(()=>N()??!0);rr(_e,()=>d(u),(me,se)=>{se(me,{get id(){return m()},get source(){return k()},get target(){return S()},get sourceX(){return z()},get sourceY(){return v()},get targetX(){return _()},get targetY(){return C()},get sourcePosition(){return M()},get targetPosition(){return H()},get animated(){return x()},get selected(){return P()},get label(){return U()},get labelStyle(){return I()},get data(){return E()},get style(){return p()},get interactionWidth(){return K()},get selectable(){return d(f)},get deletable(){return d(Oe)},get type(){return d(l)},get sourceHandleId(){return D()},get targetHandleId(){return y()},get markerStart(){return d(c)},get markerEnd(){return d(g)}})}),Ee(ve),Ee(Ce),be(()=>{Ke(Ce,"z-index",w()),Dt(ve,d(Re)),Q(ve,"data-id",m()),Q(ve,"aria-label",L()===null?void 0:L()?L():`Edge from ${k()} to ${S()}`),Ae(ve,"animated",x()),Ae(ve,"selected",P()),Ae(ve,"selectable",d(f))}),ke("click",ve,G),ke("contextmenu",ve,me=>{q(me,"edgecontextmenu")}),ke("mouseenter",ve,me=>{q(me,"edgemouseenter")}),ke("mouseleave",ve,me=>{q(me,"edgemouseleave")}),j(Se,Ce)};Xe(Me,Se=>{R()||Se(Ne)})}j(e,ie),le(),i()}function Vd(e,t){ae(t,!1);let n=h(t,"onMount",8,void 0),i=h(t,"onDestroy",8,void 0);Un(()=>{var o;return(o=n())==null||o(),i()}),ce(),le()}var Xd=Ye("<defs></defs>");function Yd(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(a,"$markers",n),{markers:a}=Be();ce();var s=Xd();Qn(s,5,o,r=>r.id,(r,l)=>{Kd(r,Vt(()=>d(l)))}),Ee(s),j(e,s),le(),i()}var Ld=Ye('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),Bd=Ye('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Wd=Ye('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function Kd(e,t){ae(t,!1);let n=h(t,"id",8),i=h(t,"type",8),o=h(t,"width",8,12.5),a=h(t,"height",8,12.5),s=h(t,"markerUnits",8,"strokeWidth"),r=h(t,"orient",8,"auto-start-reverse"),l=h(t,"color",8,void 0),u=h(t,"strokeWidth",8,void 0);ce();var c=Wd(),g=Pe(c);{var f=b=>{var k=Ld();be(()=>{Q(k,"stroke",l()),Q(k,"stroke-width",u())}),j(b,k)},m=b=>{var k=ft(),S=De(k);{var E=p=>{var w=Bd();be(()=>{Q(w,"stroke",l()),Q(w,"stroke-width",u()),Q(w,"fill",l())}),j(p,w)};Xe(S,p=>{i()===Kn.ArrowClosed&&p(E)},!0)}j(b,k)};Xe(g,b=>{i()===Kn.Arrow?b(f):b(m,!1)})}Ee(c),be(()=>{Q(c,"id",n()),Q(c,"markerWidth",`${o()}`),Q(c,"markerHeight",`${a()}`),Q(c,"markerUnits",s()),Q(c,"orient",r())}),j(e,c),le()}var Fd=ze('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!> <!></div>');function Zd(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(r,"$visibleEdges",n),a=()=>V(c,"$elementsSelectable",n);let s=h(t,"defaultEdgeOptions",8);const{visibleEdges:r,edgesInitialized:l,edges:{setDefaultOptions:u},elementsSelectable:c}=Be();Un(()=>{s()&&u(s())}),ce();var g=Fd(),f=Pe(g),m=Pe(f);Yd(m,{}),Ee(f);var b=ge(f,2);Qn(b,1,o,E=>E.id,(E,p)=>{var w=ee(()=>d(p).selectable??a()),x=ee(()=>d(p).type||"default");Rd(E,{get id(){return d(p).id},get source(){return d(p).source},get target(){return d(p).target},get data(){return d(p).data},get style(){return d(p).style},get animated(){return d(p).animated},get selected(){return d(p).selected},get selectable(){return d(w)},get deletable(){return d(p).deletable},get hidden(){return d(p).hidden},get label(){return d(p).label},get labelStyle(){return d(p).labelStyle},get markerStart(){return d(p).markerStart},get markerEnd(){return d(p).markerEnd},get sourceHandle(){return d(p).sourceHandle},get targetHandle(){return d(p).targetHandle},get sourceX(){return d(p).sourceX},get sourceY(){return d(p).sourceY},get targetX(){return d(p).targetX},get targetY(){return d(p).targetY},get sourcePosition(){return d(p).sourcePosition},get targetPosition(){return d(p).targetPosition},get ariaLabel(){return d(p).ariaLabel},get interactionWidth(){return d(p).interactionWidth},get class(){return d(p).class},get type(){return d(x)},get zIndex(){return d(p).zIndex},$$events:{edgeclick(P){fe.call(this,t,P)},edgecontextmenu(P){fe.call(this,t,P)},edgemouseenter(P){fe.call(this,t,P)},edgemouseleave(P){fe.call(this,t,P)}}})});var k=ge(b,2);{var S=E=>{Vd(E,{onMount:()=>{an(l,!0)},onDestroy:()=>{an(l,!1)}})};Xe(k,E=>{o().length>0&&E(S)})}Ee(g),j(e,g),le(),i()}var qd=ze('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function rs(e,t){let n=h(t,"x",8,0),i=h(t,"y",8,0),o=h(t,"width",8,0),a=h(t,"height",8,0),s=h(t,"isVisible",8,!0);var r=ft(),l=De(r);{var u=c=>{var g=qd();be(()=>{Ke(g,"width",typeof o()=="string"?o():`${o()}px`),Ke(g,"height",typeof a()=="string"?a():`${a()}px`),Ke(g,"transform",`translate(${n()}px, ${i()}px)`)}),j(c,g)};Xe(l,c=>{s()&&c(u)})}j(e,r)}function Gd(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(s,"$selectionRect",n),a=()=>V(r,"$selectionRectMode",n),{selectionRect:s,selectionRectMode:r}=Be();ce();var l=ee(()=>!!(o()&&a()==="user")),u=ee(()=>{var m;return(m=o())==null?void 0:m.width}),c=ee(()=>{var m;return(m=o())==null?void 0:m.height}),g=ee(()=>{var m;return(m=o())==null?void 0:m.x}),f=ee(()=>{var m;return(m=o())==null?void 0:m.y});rs(e,{get isVisible(){return d(l)},get width(){return d(u)},get height(){return d(c)},get x(){return d(g)},get y(){return d(f)}}),le(),i()}var Ud=ze('<div class="selection-wrapper nopan svelte-5pxri" role="button" tabindex="-1"><!></div>');function Jd(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(l,"$selectionRectMode",n),a=()=>V(c,"$nodeLookup",n),s=()=>V(u,"$nodes",n),r=Be(),{selectionRectMode:l,nodes:u,nodeLookup:c}=r,g=Jn();let f=Z(null);function m(p){const w=s().filter(x=>x.selected);g("selectioncontextmenu",{nodes:w,event:p})}function b(p){const w=s().filter(x=>x.selected);g("selectionclick",{nodes:w,event:p})}J(()=>(o(),a(),s()),()=>{o()==="nodes"&&(X(f,xn(a(),{filter:p=>!!p.selected})),s())}),Ue(),ce();var k=ft(),S=De(k);{var E=p=>{var w=Ud(),x=Pe(w);rs(x,{width:"100%",height:"100%",x:0,y:0}),Ee(w),Qe(w,(P,T)=>Kt==null?void 0:Kt(P,T),()=>({disabled:!1,store:r,onDrag:(P,T,N,R)=>{g("nodedrag",{event:P,targetNode:null,nodes:R})},onDragStart:(P,T,N,R)=>{g("nodedragstart",{event:P,targetNode:null,nodes:R})},onDragStop:(P,T,N,R)=>{g("nodedragstop",{event:P,targetNode:null,nodes:R})}})),wt(()=>ke("contextmenu",w,m)),wt(()=>ke("click",w,b)),wt(()=>ke("keyup",w,()=>{})),be(()=>Q(w,"style",`width: ${d(f).width??""}px; height: ${d(f).height??""}px; transform: translate(${d(f).x??""}px, ${d(f).y??""}px)`)),j(p,w)};Xe(S,p=>{o()==="nodes"&&d(f)&&hn(d(f).x)&&hn(d(f).y)&&p(E)})}j(e,k),le(),i()}function xe(e,t){let{enabled:n=!0,trigger:i,type:o="keydown"}=t;function a(s){const r=Array.isArray(i)?i:[i],l={alt:s.altKey,ctrl:s.ctrlKey,shift:s.shiftKey,meta:s.metaKey};for(const u of r){const c={modifier:[],preventDefault:!1,enabled:!0,...u},{modifier:g,key:f,callback:m,preventDefault:b,enabled:k}=c;if(k){if(g.length&&!(Array.isArray(g)?g:[g]).map(p=>typeof p=="string"?[p]:p).some(p=>p.every(w=>l[w])))continue;if(s.key===f){b&&s.preventDefault();const S={node:e,trigger:c,originalEvent:s};e.dispatchEvent(new CustomEvent("shortcut",{detail:S})),m==null||m(S)}}}}return n&&e.addEventListener(o,a),{update:s=>{const{enabled:r=!0,type:l="keydown"}=s;n&&(!r||o!==l)?e.removeEventListener(o,a):!n&&r&&e.addEventListener(l,a),n=r,o=l,i=s.trigger},destroy:()=>{e.removeEventListener(o,a)}}}function Qd(e,t){ae(t,!1);let n=h(t,"selectionKey",8,"Shift"),i=h(t,"multiSelectionKey",24,()=>Fn()?"Meta":"Control"),o=h(t,"deleteKey",8,"Backspace"),a=h(t,"panActivationKey",8," "),s=h(t,"zoomActivationKey",24,()=>Fn()?"Meta":"Control");const{selectionKeyPressed:r,multiselectionKeyPressed:l,deleteKeyPressed:u,panActivationKeyPressed:c,zoomActivationKeyPressed:g,selectionRect:f}=Be();function m(p){return p!==null&&typeof p=="object"}function b(p){return m(p)?p.modifier||[]:[]}function k(p){return p==null?"":m(p)?p.key:p}function S(p,w){return(Array.isArray(p)?p:[p]).map(P=>{const T=k(P);return{key:T,modifier:b(P),enabled:T!==null,callback:w}})}function E(){f.set(null),r.set(!1),l.set(!1),u.set(!1),c.set(!1),g.set(!1)}ce(),ke("blur",rt,E),ke("contextmenu",rt,E),Qe(rt,(p,w)=>xe==null?void 0:xe(p,w),()=>({trigger:S(n(),()=>r.set(!0)),type:"keydown"})),Qe(rt,(p,w)=>xe==null?void 0:xe(p,w),()=>({trigger:S(n(),()=>r.set(!1)),type:"keyup"})),Qe(rt,(p,w)=>xe==null?void 0:xe(p,w),()=>({trigger:S(i(),()=>l.set(!0)),type:"keydown"})),Qe(rt,(p,w)=>xe==null?void 0:xe(p,w),()=>({trigger:S(i(),()=>l.set(!1)),type:"keyup"})),Qe(rt,(p,w)=>xe==null?void 0:xe(p,w),()=>({trigger:S(o(),p=>{!(p.originalEvent.ctrlKey||p.originalEvent.metaKey||p.originalEvent.shiftKey)&&!vu(p.originalEvent)&&u.set(!0)}),type:"keydown"})),Qe(rt,(p,w)=>xe==null?void 0:xe(p,w),()=>({trigger:S(o(),()=>u.set(!1)),type:"keyup"})),Qe(rt,(p,w)=>xe==null?void 0:xe(p,w),()=>({trigger:S(a(),()=>c.set(!0)),type:"keydown"})),Qe(rt,(p,w)=>xe==null?void 0:xe(p,w),()=>({trigger:S(a(),()=>c.set(!1)),type:"keyup"})),Qe(rt,(p,w)=>xe==null?void 0:xe(p,w),()=>({trigger:S(s(),()=>g.set(!0)),type:"keydown"})),Qe(rt,(p,w)=>xe==null?void 0:xe(p,w),()=>({trigger:S(s(),()=>g.set(!1)),type:"keyup"})),le()}var jd=Ye('<path fill="none" class="svelte-flow__connection-path"></path>'),$d=Ye('<svg class="svelte-flow__connectionline"><g><!><!></g></svg>');function ef(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(m,"$connection",n),a=()=>V(b,"$connectionLineType",n),s=()=>V(g,"$width",n),r=()=>V(f,"$height",n);let l=h(t,"containerStyle",8,""),u=h(t,"style",8,""),c=h(t,"isCustomComponent",8,!1);const{width:g,height:f,connection:m,connectionLineType:b}=Be();let k=Z(null);J(()=>(o(),A(c()),a(),d(k),Di),()=>{if(o().inProgress&&!c()){const{from:w,to:x,fromPosition:P,toPosition:T}=o(),N={sourceX:w.x,sourceY:w.y,sourcePosition:P,targetX:x.x,targetY:x.y,targetPosition:T};switch(a()){case Wt.Bezier:(R=>X(k,R[0]))(Kr(N));break;case Wt.Step:(R=>X(k,R[0]))(Zn({...N,borderRadius:0}));break;case Wt.SmoothStep:(R=>X(k,R[0]))(Zn(N));break;default:(R=>X(k,R[0]))(Di(N))}}}),Ue(),ce();var S=ft(),E=De(S);{var p=w=>{var x=$d(),P=Pe(x);const T=ee(()=>kt(je(["svelte-flow__connection",cu(o().isValid)])));var N=Pe(P);et(N,t,"connectionLine",{},null);var R=ge(N);{var U=I=>{var W=jd();be(()=>{Q(W,"d",d(k)),Q(W,"style",u())}),j(I,W)};Xe(R,I=>{c()||I(U)})}Ee(P),Ee(x),be(()=>{Q(x,"width",s()),Q(x,"height",r()),Q(x,"style",l()),Dt(P,d(T))}),j(w,x)};Xe(E,w=>{o().inProgress&&w(p)})}j(e,S),le(),i()}var tf=ze("<div><!></div>");function oo(e,t){const n=Ie(t,["children","$$slots","$$events","$$legacy"]),i=Ie(n,["position","style","class"]);ae(t,!1);const[o,a]=Le(),s=()=>V(g,"$selectionRectMode",o),r=Z();let l=h(t,"position",8,"top-right"),u=h(t,"style",8,void 0),c=h(t,"class",8,void 0);const{selectionRectMode:g}=Be();J(()=>A(l()),()=>{X(r,`${l()}`.split("-"))}),Ue(),ce();var f=tf();let m;var b=Pe(f);et(b,t,"default",{},null),Ee(f),be(()=>{m=Li(f,m,{class:je(["svelte-flow__panel",c(),...d(r)]),style:u(),...i}),Ke(f,"pointer-events",s()?"none":"")}),j(e,f),le(),a()}var nf=ze('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function of(e,t){ae(t,!1);let n=h(t,"proOptions",8,void 0),i=h(t,"position",8,"bottom-right");ce();var o=ft(),a=De(o);{var s=r=>{oo(r,{get position(){return i()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(l,u)=>{var c=nf();j(l,c)},$$slots:{default:!0}})};Xe(a,r=>{var l;(l=n())!=null&&l.hideAttribution||r(s)})}j(e,o),le()}function tr(e,{nodeTypes:t,edgeTypes:n,minZoom:i,maxZoom:o,translateExtent:a,paneClickDistance:s}){t!==void 0&&e.setNodeTypes(t),n!==void 0&&e.setEdgeTypes(n),i!==void 0&&e.setMinZoom(i),o!==void 0&&e.setMaxZoom(o),a!==void 0&&e.setTranslateExtent(a),s!==void 0&&e.setPaneClickDistance(s)}const rf=e=>Object.keys(e);function nr(e,t){rf(t).forEach(n=>{const i=t[n];i!==void 0&&e[n].set(i)})}function sf(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function af(e="light"){return ct("light",n=>{if(e!=="system"){n(e);return}const i=sf(),o=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}})}var lf=ze('<!> <!> <div class="svelte-flow__edgelabel-renderer"></div> <div class="svelte-flow__viewport-portal"></div> <!> <!>',1),cf=ze("<!> <!>",1),uf=ze("<div><!> <!> <!> <!></div>");function df(e,t){const n=Ms(t),i=Ie(t,["children","$$slots","$$events","$$legacy"]),o=Ie(i,["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"]);ae(t,!1);const[a,s]=Le(),r=()=>V(w(),"$viewport",a),l=()=>V(jt,"$initialized",a),u=()=>V(d(c),"$colorModeClass",a),c=Z();let g=h(t,"id",8,"1"),f=h(t,"nodes",8),m=h(t,"edges",8),b=h(t,"fitView",8,void 0),k=h(t,"fitViewOptions",8,void 0),S=h(t,"minZoom",8,void 0),E=h(t,"maxZoom",8,void 0),p=h(t,"initialViewport",8,void 0),w=h(t,"viewport",8,void 0),x=h(t,"nodeTypes",8,void 0),P=h(t,"edgeTypes",8,void 0),T=h(t,"selectionKey",8,void 0),N=h(t,"selectionMode",8,void 0),R=h(t,"panActivationKey",8,void 0),U=h(t,"multiSelectionKey",8,void 0),I=h(t,"zoomActivationKey",8,void 0),W=h(t,"nodesDraggable",8,void 0),O=h(t,"nodesConnectable",8,void 0),D=h(t,"nodeDragThreshold",8,void 0),y=h(t,"elementsSelectable",8,void 0),z=h(t,"snapGrid",8,void 0),v=h(t,"deleteKey",8,void 0),_=h(t,"connectionRadius",8,void 0),C=h(t,"connectionLineType",8,void 0),M=h(t,"connectionMode",24,()=>Ht.Strict),H=h(t,"connectionLineStyle",8,""),L=h(t,"connectionLineContainerStyle",8,""),K=h(t,"onMoveStart",8,void 0),ne=h(t,"onMove",8,void 0),Y=h(t,"onMoveEnd",8,void 0),B=h(t,"isValidConnection",8,void 0),te=h(t,"translateExtent",8,void 0),de=h(t,"nodeExtent",8,void 0),re=h(t,"onlyRenderVisibleElements",8,void 0),ye=h(t,"panOnScrollMode",24,()=>Ct.Free),G=h(t,"preventScrolling",8,!0),q=h(t,"zoomOnScroll",8,!0),ie=h(t,"zoomOnDoubleClick",8,!0),Me=h(t,"zoomOnPinch",8,!0),Ne=h(t,"panOnScroll",8,!1),Se=h(t,"panOnDrag",8,!0),Ce=h(t,"selectionOnDrag",8,void 0),ve=h(t,"autoPanOnConnect",8,!0),Re=h(t,"autoPanOnNodeDrag",8,!0),_e=h(t,"onerror",8,void 0),Oe=h(t,"ondelete",8,void 0),me=h(t,"onedgecreate",8,void 0),se=h(t,"attributionPosition",8,void 0),He=h(t,"proOptions",8,void 0),tt=h(t,"defaultEdgeOptions",8,void 0),pe=h(t,"width",8,void 0),We=h(t,"height",8,void 0),Te=h(t,"colorMode",8,"light"),we=h(t,"onconnect",8,void 0),zt=h(t,"onconnectstart",8,void 0),Rt=h(t,"onconnectend",8,void 0),Ve=h(t,"onbeforedelete",8,void 0),Fe=h(t,"oninit",8,void 0),he=h(t,"nodeOrigin",8,void 0),Ze=h(t,"paneClickDistance",8,0),it=h(t,"nodeClickDistance",8,0),Qt=h(t,"defaultMarkerColor",8,"#b1b1b7"),ai=h(t,"style",8,void 0),at=h(t,"class",8,void 0),ot=Z(),gt=Z(),Je=Z();const li=r()||p(),qe=Ss(io)?Be():Ed({nodes:F(f()),edges:F(m()),width:pe(),height:We(),fitView:b(),nodeOrigin:he(),nodeExtent:de()});Un(()=>(qe.width.set(d(gt)),qe.height.set(d(Je)),qe.domNode.set(d(ot)),qe.syncNodeStores(f()),qe.syncEdgeStores(m()),qe.syncViewport(w()),b()!==void 0&&qe.fitViewOnInit.set(b()),k()&&qe.fitViewOptions.set(k()),tr(qe,{nodeTypes:x(),edgeTypes:P(),minZoom:S(),maxZoom:E(),translateExtent:te(),paneClickDistance:Ze()}),()=>{qe.reset()}));const{initialized:jt}=qe;let $t=Z(!1);J(()=>(d(gt),d(Je)),()=>{d(gt)!==void 0&&d(Je)!==void 0&&(qe.width.set(d(gt)),qe.height.set(d(Je)))}),J(()=>(d($t),l(),A(Fe())),()=>{var Ge;!d($t)&&l()&&((Ge=Fe())==null||Ge(),X($t,!0))}),J(()=>(A(g()),A(C()),A(_()),A(N()),A(z()),A(Qt()),A(W()),A(O()),A(y()),A(re()),A(B()),A(ve()),A(Re()),A(_e()),A(Oe()),A(me()),A(M()),A(D()),A(we()),A(zt()),A(Rt()),A(Ve()),A(he()),nr),()=>{const Ge={flowId:g(),connectionLineType:C(),connectionRadius:_(),selectionMode:N(),snapGrid:z(),defaultMarkerColor:Qt(),nodesDraggable:W(),nodesConnectable:O(),elementsSelectable:y(),onlyRenderVisibleElements:re(),isValidConnection:B(),autoPanOnConnect:ve(),autoPanOnNodeDrag:Re(),onerror:_e(),ondelete:Oe(),onedgecreate:me(),connectionMode:M(),nodeDragThreshold:D(),onconnect:we(),onconnectstart:zt(),onconnectend:Rt(),onbeforedelete:Ve(),nodeOrigin:he()};nr(qe,Ge)}),J(()=>(A(x()),A(P()),A(S()),A(E()),A(te()),A(Ze())),()=>{tr(qe,{nodeTypes:x(),edgeTypes:P(),minZoom:S(),maxZoom:E(),translateExtent:te(),paneClickDistance:Ze()})}),J(()=>A(Te()),()=>{Cs(X(c,af(Te())),"$colorModeClass",a)}),Ue(),ce();var lt=uf();let bn;var _n=Pe(lt);Qd(_n,{get selectionKey(){return T()},get deleteKey(){return v()},get panActivationKey(){return R()},get multiSelectionKey(){return U()},get zoomActivationKey(){return I()}});var ro=ge(_n,2),ss=ee(()=>ye()===void 0?Ct.Free:ye()),as=ee(()=>G()===void 0?!0:G()),ls=ee(()=>q()===void 0?!0:q()),cs=ee(()=>ie()===void 0?!0:ie()),us=ee(()=>Me()===void 0?!0:Me()),ds=ee(()=>Ne()===void 0?!1:Ne()),fs=ee(()=>Se()===void 0?!0:Se()),hs=ee(()=>Ze()===void 0?0:Ze());Cd(ro,{initialViewport:li,get onMoveStart(){return K()},get onMove(){return ne()},get onMoveEnd(){return Y()},get panOnScrollMode(){return d(ss)},get preventScrolling(){return d(as)},get zoomOnScroll(){return d(ls)},get zoomOnDoubleClick(){return d(cs)},get zoomOnPinch(){return d(us)},get panOnScroll(){return d(ds)},get panOnDrag(){return d(fs)},get paneClickDistance(){return d(hs)},children:(Ge,Wf)=>{var ms=ee(()=>Se()===void 0?!0:Se());Pd(Ge,{get panOnDrag(){return d(ms)},get selectionOnDrag(){return Ce()},$$events:{paneclick(en){fe.call(this,t,en)},panecontextmenu(en){fe.call(this,t,en)}},children:(en,Kf)=>{var ao=cf(),lo=De(ao);Nd(lo,{children:(vs,Ff)=>{var co=lf(),uo=De(co);Zd(uo,{get defaultEdgeOptions(){return tt()},$$events:{edgeclick(ue){fe.call(this,t,ue)},edgecontextmenu(ue){fe.call(this,t,ue)},edgemouseenter(ue){fe.call(this,t,ue)},edgemouseleave(ue){fe.call(this,t,ue)}}});var fo=ge(uo,2);ef(fo,{get containerStyle(){return L()},get style(){return H()},isCustomComponent:n.connectionLine,$$slots:{connectionLine:(ue,Zf)=>{var go=ft(),ws=De(go);et(ws,t,"connectionLine",{},null),j(ue,go)}}});var ho=ge(fo,6);Id(ho,{get nodeClickDistance(){return it()},$$events:{nodeclick(ue){fe.call(this,t,ue)},nodemouseenter(ue){fe.call(this,t,ue)},nodemousemove(ue){fe.call(this,t,ue)},nodemouseleave(ue){fe.call(this,t,ue)},nodedragstart(ue){fe.call(this,t,ue)},nodedrag(ue){fe.call(this,t,ue)},nodedragstop(ue){fe.call(this,t,ue)},nodecontextmenu(ue){fe.call(this,t,ue)}}});var ps=ge(ho,2);Jd(ps,{$$events:{selectionclick(ue){fe.call(this,t,ue)},selectioncontextmenu(ue){fe.call(this,t,ue)},nodedragstart(ue){fe.call(this,t,ue)},nodedrag(ue){fe.call(this,t,ue)},nodedragstop(ue){fe.call(this,t,ue)}}}),j(vs,co)},$$slots:{default:!0}});var ys=ge(lo,2);Gd(ys,{}),j(en,ao)},$$slots:{default:!0}})},$$slots:{default:!0}});var so=ge(ro,2);of(so,{get proOptions(){return He()},get position(){return se()}});var gs=ge(so,2);et(gs,t,"default",{},null),Ee(lt),Bi(lt,Ge=>X(ot,Ge),()=>d(ot)),be(()=>bn=Li(lt,bn,{style:ai(),class:je(["svelte-flow",at(),u()]),"data-testid":"svelte-flow__wrapper",...o,role:"application"},"svelte-12wlba6")),wo(lt,"clientWidth",Ge=>X(gt,Ge)),wo(lt,"clientHeight",Ge=>X(Je,Ge)),ke("dragover",lt,function(Ge){fe.call(this,t,Ge)}),ke("drop",lt,function(Ge){fe.call(this,t,Ge)}),j(e,lt),le(),s()}var ff=ze("<button><!></button>");function zn(e,t){const n=Ie(t,["children","$$slots","$$events","$$legacy"]),i=Ie(n,["class"]);ae(t,!1);let o=h(t,"class",8,void 0),a,s,r,l,u;ce();var c=ff();let g;var f=Pe(c);et(f,t,"default",{class:"button-svg"},null),Ee(c),be(()=>{g=Li(c,g,{type:"button",class:je(["svelte-flow__controls-button",o()]),...i}),Ke(c,"--xy-controls-button-background-color-props",a),Ke(c,"--xy-controls-button-background-color-hover-props",s),Ke(c,"--xy-controls-button-color-props",r),Ke(c,"--xy-controls-button-color-hover-props",l),Ke(c,"--xy-controls-button-border-color-props",u)}),ke("click",c,function(m){fe.call(this,t,m)}),j(e,c),le()}var hf=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function gf(e){var t=hf();j(e,t)}var mf=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function yf(e){var t=mf();j(e,t)}var vf=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function pf(e){var t=vf();j(e,t)}var wf=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function xf(e){var t=wf();j(e,t)}var bf=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function _f(e){var t=bf();j(e,t)}var kf=ze("<!> <!>",1),Ef=ze("<!> <!> <!> <!> <!> <!>",1);function Sf(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(C,"$nodesDraggable",n),a=()=>V(M,"$nodesConnectable",n),s=()=>V(H,"$elementsSelectable",n),r=()=>V(z,"$viewport",n),l=()=>V(v,"$minZoom",n),u=()=>V(_,"$maxZoom",n),c=Z(),g=Z(),f=Z(),m=Z();let b=h(t,"position",8,"bottom-left"),k=h(t,"showZoom",8,!0),S=h(t,"showFitView",8,!0),E=h(t,"showLock",8,!0),p=h(t,"buttonBgColor",8,void 0),w=h(t,"buttonBgColorHover",8,void 0),x=h(t,"buttonColor",8,void 0),P=h(t,"buttonColorHover",8,void 0),T=h(t,"buttonBorderColor",8,void 0),N=h(t,"ariaLabel",8,void 0),R=h(t,"style",8,void 0),U=h(t,"orientation",8,"vertical"),I=h(t,"fitViewOptions",8,void 0),W=h(t,"class",8,"");const{zoomIn:O,zoomOut:D,fitView:y,viewport:z,minZoom:v,maxZoom:_,nodesDraggable:C,nodesConnectable:M,elementsSelectable:H}=Be(),L={bgColor:p(),bgColorHover:w(),color:x(),colorHover:P(),borderColor:T()},K=()=>{O()},ne=()=>{D()},Y=()=>{y(I())},B=()=>{X(c,!d(c)),C.set(d(c)),M.set(d(c)),H.set(d(c))};J(()=>(o(),a(),s()),()=>{X(c,o()||a()||s())}),J(()=>(r(),l()),()=>{X(g,r().zoom<=l())}),J(()=>(r(),u()),()=>{X(f,r().zoom>=u())}),J(()=>A(U()),()=>{X(m,U()==="horizontal"?"horizontal":"vertical")}),Ue(),ce();var te=ee(()=>je(["svelte-flow__controls",d(m),W()])),de=ee(()=>N()??"Svelte Flow controls");oo(e,{get class(){return d(te)},get position(){return b()},"data-testid":"svelte-flow__controls",get"aria-label"(){return d(de)},get style(){return R()},children:(re,ye)=>{var G=Ef(),q=De(G);et(q,t,"before",{},null);var ie=ge(q,2);{var Me=Oe=>{var me=kf(),se=De(me);zn(se,Vt({class:"svelte-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",get disabled(){return d(f)}},L,{$$events:{click:K},children:(tt,pe)=>{gf(tt)},$$slots:{default:!0}}));var He=ge(se,2);zn(He,Vt({class:"svelte-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",get disabled(){return d(g)}},L,{$$events:{click:ne},children:(tt,pe)=>{yf(tt)},$$slots:{default:!0}})),j(Oe,me)};Xe(ie,Oe=>{k()&&Oe(Me)})}var Ne=ge(ie,2);{var Se=Oe=>{zn(Oe,Vt({class:"svelte-flow__controls-fitview",title:"fit view","aria-label":"fit view"},L,{$$events:{click:Y},children:(me,se)=>{pf(me)},$$slots:{default:!0}}))};Xe(Ne,Oe=>{S()&&Oe(Se)})}var Ce=ge(Ne,2);{var ve=Oe=>{zn(Oe,Vt({class:"svelte-flow__controls-interactive",title:"toggle interactivity","aria-label":"toggle interactivity"},L,{$$events:{click:B},children:(me,se)=>{var He=ft(),tt=De(He);{var pe=Te=>{_f(Te)},We=Te=>{xf(Te)};Xe(tt,Te=>{d(c)?Te(pe):Te(We,!1)})}j(me,He)},$$slots:{default:!0}}))};Xe(Ce,Oe=>{E()&&Oe(ve)})}var Re=ge(Ce,2);et(Re,t,"default",{},null);var _e=ge(Re,2);et(_e,t,"after",{},null),j(re,G)},$$slots:{default:!0}}),le(),i()}var Mt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Mt||(Mt={}));var Cf=Ye("<circle></circle>");function Mf(e,t){ae(t,!1);let n=h(t,"radius",8,5),i=h(t,"class",8,"");ce();var o=Cf();const a=ee(()=>kt(je(["svelte-flow__background-pattern","dots",i()])));be(()=>{Q(o,"cx",n()),Q(o,"cy",n()),Q(o,"r",n()),Dt(o,d(a))}),j(e,o),le()}var Pf=Ye("<path></path>");function zf(e,t){ae(t,!1);let n=h(t,"lineWidth",8,1),i=h(t,"dimensions",8),o=h(t,"variant",8,void 0),a=h(t,"class",8,"");ce();var s=Pf();const r=ee(()=>kt(je(["svelte-flow__background-pattern",o(),a()])));be(()=>{Q(s,"stroke-width",n()),Q(s,"d",`M${i()[0]/2} 0 V${i()[1]} M0 ${i()[1]/2} H${i()[0]}`),Dt(s,d(r))}),j(e,s),le()}const Nf={[Mt.Dots]:1,[Mt.Lines]:1,[Mt.Cross]:6};var Tf=Ye('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function Af(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(P,"$flowId",n),a=()=>V(x,"$viewport",n),s=Z(),r=Z(),l=Z(),u=Z(),c=Z();let g=h(t,"id",8,void 0),f=h(t,"variant",24,()=>Mt.Dots),m=h(t,"gap",8,20),b=h(t,"size",8,1),k=h(t,"lineWidth",8,1),S=h(t,"bgColor",8,void 0),E=h(t,"patternColor",8,void 0),p=h(t,"patternClass",8,void 0),w=h(t,"class",8,"");const{viewport:x,flowId:P}=Be(),T=b()||Nf[f()],N=f()===Mt.Dots,R=f()===Mt.Cross,U=Array.isArray(m())?m():[m(),m()];J(()=>(o(),A(g())),()=>{X(s,`background-pattern-${o()}-${g()?g():""}`)}),J(()=>a(),()=>{X(r,[U[0]*a().zoom||1,U[1]*a().zoom||1])}),J(()=>a(),()=>{X(l,T*a().zoom)}),J(()=>(d(l),d(r)),()=>{X(u,R?[d(l),d(l)]:d(r))}),J(()=>(d(l),d(u)),()=>{X(c,N?[d(l)/2,d(l)/2]:[d(u)[0]/2,d(u)[1]/2])}),Ue(),ce();var I=Tf();const W=ee(()=>kt(je(["svelte-flow__background",w()])));var O=Pe(I),D=Pe(O);{var y=_=>{var C=ee(()=>d(l)/2);Mf(_,{get radius(){return d(C)},get class(){return p()}})},z=_=>{zf(_,{get dimensions(){return d(u)},get variant(){return f()},get lineWidth(){return k()},get class(){return p()}})};Xe(D,_=>{N?_(y):_(z,!1)})}Ee(O);var v=ge(O);Ee(I),be(()=>{Dt(I,d(W),"svelte-1r7pe8d"),Ke(I,"--xy-background-color-props",S()),Ke(I,"--xy-background-pattern-color-props",E()),Q(O,"id",d(s)),Q(O,"x",a().x%d(r)[0]),Q(O,"y",a().y%d(r)[1]),Q(O,"width",d(r)[0]),Q(O,"height",d(r)[1]),Q(O,"patternTransform",`translate(-${d(c)[0]},-${d(c)[1]})`),Q(v,"fill",`url(#${d(s)})`)}),j(e,I),le(),i()}var Of=Ye("<rect></rect>");function Hf(e,t){ae(t,!1);let n=h(t,"x",8),i=h(t,"y",8),o=h(t,"width",8,0),a=h(t,"height",8,0),s=h(t,"borderRadius",8,5),r=h(t,"color",8,void 0),l=h(t,"shapeRendering",8),u=h(t,"strokeColor",8,void 0),c=h(t,"strokeWidth",8,2),g=h(t,"selected",8,!1),f=h(t,"class",8,"");ce();var m=Of();const b=ee(()=>kt(je(["svelte-flow__minimap-node",f()])));be(()=>{Dt(m,d(b)),Q(m,"x",n()),Q(m,"y",i()),Q(m,"rx",s()),Q(m,"ry",s()),Q(m,"width",o()),Q(m,"height",a()),Q(m,"style",`${r()?`fill: ${r()};`:""}${u()?`stroke: ${u()};`:""}${c()?`stroke-width: ${c()};`:""}`),Q(m,"shape-rendering",l()),Ae(m,"selected",g())}),j(e,m),le()}function bi(e,t){const n=Ku({domNode:e,panZoom:t.panZoom,getTransform:()=>{const o=F(t.viewport);return[o.x,o.y,o.zoom]},getViewScale:t.getViewScale});function i(o){n.update({translateExtent:o.translateExtent,width:o.width,height:o.height,inversePan:o.inversePan,zoomStep:o.zoomStep,pannable:o.pannable,zoomable:o.zoomable})}return{update:i,destroy(){n.destroy()}}}const _i=e=>e instanceof Function?e:()=>e;var If=Ye("<title> </title>"),Df=Ye('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>');function Rf(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(Se,"$flowId",n),a=()=>V(ie,"$viewport",n),s=()=>V(Me,"$containerWidth",n),r=()=>V(Ne,"$containerHeight",n),l=()=>V(q,"$nodeLookup",n),u=()=>V(G,"$nodes",n),c=()=>V(Ce,"$panZoom",n),g=()=>V(ve,"$translateExtent",n),f=Z(),m=Z(),b=Z(),k=Z(),S=Z(),E=Z(),p=Z(),w=Z(),x=Z(),P=Z(),T=Z(),N=Z(),R=Z();let U=h(t,"position",8,"bottom-right"),I=h(t,"ariaLabel",8,"Mini map"),W=h(t,"nodeStrokeColor",8,"transparent"),O=h(t,"nodeColor",8,void 0),D=h(t,"nodeClass",8,""),y=h(t,"nodeBorderRadius",8,5),z=h(t,"nodeStrokeWidth",8,2),v=h(t,"bgColor",8,void 0),_=h(t,"maskColor",8,void 0),C=h(t,"maskStrokeColor",8,void 0),M=h(t,"maskStrokeWidth",8,void 0),H=h(t,"width",8,void 0),L=h(t,"height",8,void 0),K=h(t,"pannable",8,!0),ne=h(t,"zoomable",8,!0),Y=h(t,"inversePan",8,void 0),B=h(t,"zoomStep",8,void 0),te=h(t,"style",8,""),de=h(t,"class",8,"");const re=200,ye=150,{nodes:G,nodeLookup:q,viewport:ie,width:Me,height:Ne,flowId:Se,panZoom:Ce,translateExtent:ve}=Be(),Re=O()===void 0?void 0:_i(O()),_e=_i(W()),Oe=_i(D()),me=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",se=`svelte-flow__minimap-desc-${o()}`;let He=Z(d(f));const tt=()=>d(E);J(()=>(a(),s(),r()),()=>{X(f,{x:-a().x/a().zoom,y:-a().y/a().zoom,width:s()/a().zoom,height:r()/a().zoom})}),J(()=>(l(),d(f),u()),()=>{X(He,l().size>0?Yr(xn(l()),d(f)):d(f)),u()}),J(()=>A(H()),()=>{X(m,H()??re)}),J(()=>A(L()),()=>{X(b,L()??ye)}),J(()=>(d(He),d(m)),()=>{X(k,d(He).width/d(m))}),J(()=>(d(He),d(b)),()=>{X(S,d(He).height/d(b))}),J(()=>(d(k),d(S)),()=>{X(E,Math.max(d(k),d(S)))}),J(()=>(d(E),d(m)),()=>{X(p,d(E)*d(m))}),J(()=>(d(E),d(b)),()=>{X(w,d(E)*d(b))}),J(()=>d(E),()=>{X(x,5*d(E))}),J(()=>(d(He),d(p),d(x)),()=>{X(P,d(He).x-(d(p)-d(He).width)/2-d(x))}),J(()=>(d(He),d(w),d(x)),()=>{X(T,d(He).y-(d(w)-d(He).height)/2-d(x))}),J(()=>(d(p),d(x)),()=>{X(N,d(p)+d(x)*2)}),J(()=>(d(w),d(x)),()=>{X(R,d(w)+d(x)*2)}),Ue(),ce();var pe=ee(()=>te()+(v()?`;--xy-minimap-background-color-props:${v()}`:"")),We=ee(()=>je(["svelte-flow__minimap",de()]));oo(e,{get position(){return U()},get style(){return d(pe)},get class(){return d(We)},"data-testid":"svelte-flow__minimap",children:(Te,we)=>{var zt=ft(),Rt=De(zt);{var Ve=Fe=>{var he=Df();Q(he,"aria-labelledby",se);var Ze=Pe(he);{var it=at=>{var ot=If();Q(ot,"id",se);var gt=Pe(ot,!0);Ee(ot),be(()=>Jt(gt,I())),j(at,ot)};Xe(Ze,at=>{I()&&at(it)})}var Qt=ge(Ze);Qn(Qt,1,u,at=>at.id,(at,ot)=>{var gt=ft();const Je=ee(()=>l().get(d(ot).id));var li=De(gt);{var qe=jt=>{const $t=ee(()=>Pt(d(Je)));var lt=ee(()=>Re==null?void 0:Re(d(Je))),bn=ee(()=>_e(d(Je))),_n=ee(()=>Oe(d(Je)));Hf(jt,Vt({get x(){return d(Je).internals.positionAbsolute.x},get y(){return d(Je).internals.positionAbsolute.y}},()=>d($t),{get selected(){return d(Je).selected},get color(){return d(lt)},get borderRadius(){return y()},get strokeColor(){return d(bn)},get strokeWidth(){return z()},shapeRendering:me,get class(){return d(_n)}}))};Xe(li,jt=>{d(Je)&&Br(d(Je))&&jt(qe)})}j(at,gt)});var ai=ge(Qt);Ee(he),Qe(he,(at,ot)=>bi==null?void 0:bi(at,ot),()=>({panZoom:c(),viewport:ie,getViewScale:tt,translateExtent:g(),width:s(),height:r(),inversePan:Y(),zoomStep:B(),pannable:K(),zoomable:ne()})),be(()=>{Q(he,"width",d(m)),Q(he,"height",d(b)),Q(he,"viewBox",`${d(P)??""} ${d(T)??""} ${d(N)??""} ${d(R)??""}`),Ke(he,"--xy-minimap-mask-background-color-props",_()),Ke(he,"--xy-minimap-mask-stroke-color-props",C()),Ke(he,"--xy-minimap-mask-stroke-width-props",M()?M()*d(E):void 0),Q(ai,"d",`M${d(P)-d(x)},${d(T)-d(x)}h${d(N)+d(x)*2}v${d(R)+d(x)*2}h${-d(N)-d(x)*2}z
      M${d(f).x??""},${d(f).y??""}h${d(f).width??""}v${d(f).height??""}h${-d(f).width}z`)}),j(Fe,he)};Xe(Rt,Fe=>{c()&&Fe(Ve)})}j(Te,zt)},$$slots:{default:!0}}),le(),i()}var Vf=ze('<!> <div>Custom Color Picker Node: <strong> </strong></div> <input class="nodrag" type="color"> <!> <!>',1);function Xf(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(r,"$color",n);let a=h(t,"data",8),s=h(t,"isConnectable",8);const{color:r}=a();ce();var l=Vf(),u=De(l);At(u,{type:"target",get position(){return oe.Left},style:"background: #555;",get isConnectable(){return s()}});var c=ge(u,2),g=ge(Pe(c)),f=Pe(g,!0);Ee(g),Ee(c);var m=ge(c,2);Ps(m);var b=ge(m,2);At(b,{type:"source",get position(){return oe.Right},id:"a",style:"top: 10px; background: #555;",get isConnectable(){return s()}});var k=ge(b,2);At(k,{type:"source",get position(){return oe.Right},id:"b",style:"bottom: 10px; top: auto; background: #555;",get isConnectable(){return s()}}),be(()=>{Jt(f,o()),zs(m,o())}),ke("input",m,S=>{an(r,S.currentTarget.value)}),j(e,l),le(),i()}var Yf=ze("<!> <!> <!>",1),Lf=ze('<div style="height:100vh;"><!></div>');function Bf(e,t){ae(t,!1);const[n,i]=Le(),o=()=>V(s,"$bgColor",n),a={selectorNode:Xf},s=$("#1A192B"),r=[{id:"1",type:"input",data:{label:"An input node"},position:{x:0,y:50},sourcePosition:oe.Right},{id:"2",type:"selectorNode",data:{color:s},style:"border: 1px solid #777; padding: 10px;",position:{x:300,y:50}},{id:"3",type:"output",data:{label:"Output A"},position:{x:650,y:25},targetPosition:oe.Left},{id:"4",type:"output",data:{label:"Output B"},position:{x:650,y:100},targetPosition:oe.Left}],l=[{id:"e1-2",source:"1",target:"2",animated:!0,style:"stroke: #fff;"},{id:"e2a-3",source:"2",target:"3",sourceHandle:"a",animated:!0,style:"stroke: #fff;"},{id:"e2b-4",source:"2",target:"4",sourceHandle:"b",animated:!0,style:"stroke: #fff;"}],u=$(r),c=$(l);ce();var g=Lf(),f=Pe(g);df(f,{nodes:u,edges:c,nodeTypes:a,get style(){return`background: ${o()??""}`},fitView:!0,children:(m,b)=>{var k=Yf(),S=De(k);Af(S,{});var E=ge(S,2);Sf(E,{});var p=ge(E,2);Rf(p,{}),j(m,k)},$$slots:{default:!0}}),Ee(g),j(e,g),le(),i()}function uh(e){Bf(e,{})}export{uh as component};
